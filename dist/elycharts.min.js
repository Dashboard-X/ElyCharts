/**********************************************************************
 * ELYCHARTS v2.1.3
 * A Javascript library to generate interactive charts with vectorial graphics.
 *
 * Copyright (c) 2010 Void Labs s.n.c. (http://void.it)
 * Licensed under the MIT (http://creativecommons.org/licenses/MIT/) license.
 **********************************************************************/
(function(a){if(!a.elycharts){a.elycharts={}}a.elycharts.templates={common:{margins:[10,10,10,10],interactive:true,defaultSeries:{visible:true,tooltip:{active:true,width:100,height:50,roundedCorners:5,padding:[6,6],frameProps:{fill:"white","stroke-width":2},contentStyle:{"font-family":"Arial","font-size":"12px","line-height":"16px",color:"black"}},highlight:{scaleSpeed:100,scaleEasing:"",moveSpeed:100,moveEasing:"",restoreSpeed:0,restoreEasing:""},anchor:{},startAnimation:{type:"simple",speed:600,delay:0,propsFrom:{},propsTo:{},easing:""},label:{active:false,html:false,props:{fill:"black",stroke:"none","font-family":"Arial","font-size":"16px"},style:{cursor:"default"}}},series:{empty:{label:{active:false},tooltip:{active:false}}},features:{tooltip:{fadeDelay:100,moveDelay:300},mousearea:{type:"single",indexCenter:"auto",areaMoveDelay:500,syncTag:false},highlight:{indexHighlightProps:{opacity:1}},animation:{startAnimation:{speed:600,delay:0,easing:""},stepAnimation:{speed:600,delay:0,easing:""}},frameAnimation:{active:false,cssFrom:{opacity:0},cssTo:{opacity:1},speed:"slow",easing:"linear"},pixelWorkAround:{active:true},label:{},shadows:{active:false,offset:[2,2],props:{"stroke-width":0,"stroke-opacity":0,fill:"black","fill-opacity":0.3}},balloons:{active:false,style:{},padding:[5,5],left:10,line:[[0,0],[0,0]],lineProps:{}},legend:{horizontal:false,x:"auto",y:10,width:"auto",height:20,itemWidth:"fixed",margins:[0,0,0,0],dotMargins:[10,5],borderProps:{fill:"white",stroke:"black","stroke-width":1},dotType:"rect",dotWidth:10,dotHeight:10,dotR:5,dotProps:{type:"rect",width:10,height:10},textProps:{font:"12px Arial",fill:"#000"}},debug:{active:false}},nop:0},line:{template:"common",barMargins:0,defaultAxis:{normalize:2,min:0,labels:false,labelsDistance:8,labelsRotate:0,labelsProps:{font:"10px Arial",fill:"#000"},titleDistance:25,titleDistanceIE:0.75,titleProps:{font:"12px Arial",fill:"#000","font-weight":"bold"}},axis:{x:{titleDistanceIE:1.2}},defaultSeries:{type:"line",axis:"l",cumulative:false,rounded:1,lineCenter:"auto",plotProps:{"stroke-width":1,"stroke-linejoin":"round"},barWidthPerc:100,fill:false,fillProps:{stroke:"none","stroke-width":0,"stroke-opacity":0,opacity:0.3},dot:false,dotProps:{size:4,stroke:"#000",zindex:5},dotShowOnNull:false,mouseareaShowOnNull:false,startAnimation:{plotPropsFrom:false,fillPropsFrom:false,dotPropsFrom:false,shadowPropsFrom:false}},features:{grid:{nx:"auto",ny:4,draw:false,forceBorder:false,props:{stroke:"#e0e0e0","stroke-width":1},extra:[0,0,0,0],labelsCenter:"auto",evenVProps:false,oddVProps:false,evenHProps:false,oddHProps:false,ticks:{active:[false,false,false],size:[10,10],props:{stroke:"#e0e0e0","stroke-width":1}}}},nop:0},pie:{template:"common",startAngle:0,clockwise:false,valueThresold:0.006,defaultSeries:{}},funnel:{template:"common",rh:0,method:"width",topSector:0,topSectorProps:{fill:"#d0d0d0"},bottomSector:0.1,bottomSectorProps:{fill:"#d0d0d0"},edgeProps:{fill:"#c0c0c0","stroke-width":1,opacity:1},nop:0},barline:{template:"common",direction:"ltr"}}})(jQuery);(function(e){if(!e.elycharts){e.elycharts={}}e.elycharts.lastId=0;e.fn.chart=function(g){if(!this.length){return this}var h=this.data("elycharts_env");if(typeof g=="string"){if(g.toLowerCase()=="config"){return h?h.opt:false}if(g.toLowerCase()=="clear"){if(h){h.paper.clear();this.html("");this.data("elycharts_env",false)}}}else{if(!h){if(g){g=b(g)}if(!g||!g.type||!e.elycharts.templates[g.type]){alert("ElyCharts ERROR: chart type is not specified");return false}h=f(this,g);h.pieces=e.elycharts[h.opt.type].draw(h);this.data("elycharts_env",h)}else{g=d(g,h.opt);h.oldopt=c._clone(h.opt);h.opt=e.extend(true,h.opt,g);h.newopt=g;h.pieces=e.elycharts[h.opt.type].draw(h)}}return this};function b(g){var h;if(e.elysia_charts){if(e.elysia_charts.default_options){for(h in e.elysia_charts.default_options){e.elycharts.templates[h]=e.elysia_charts.default_options[h]}}if(e.elysia_charts.templates){for(h in e.elysia_charts.templates){e.elycharts.templates[h]=e.elysia_charts.templates[h]}}}while(g.template){var i=g.template;delete g.template;g=e.extend(true,{},e.elycharts.templates[i],g)}if(!g.template&&g.type){g.template=g.type;while(g.template){i=g.template;delete g.template;g=e.extend(true,{},e.elycharts.templates[i],g)}}return d(g,g)}function f(i,g){if(!g.width){g.width=i.width()}if(!g.height){g.height=i.height()}var h={id:e.elycharts.lastId++,paper:c._RaphaelInstance(i.get()[0],g.width,g.height),container:i,plots:[],opt:g};h.paper.rect(0,0,1,1).attr({opacity:0});e.elycharts[g.type].init(h);return h}function d(g,h){if(g.type=="pie"||g.type=="funnel"){if(g.values&&e.isArray(g.values)&&!e.isArray(g.values[0])){g.values={root:g.values}}if(g.tooltips&&e.isArray(g.tooltips)&&!e.isArray(g.tooltips[0])){g.tooltips={root:g.tooltips}}if(g.anchors&&e.isArray(g.anchors)&&!e.isArray(g.anchors[0])){g.anchors={root:g.anchors}}if(g.balloons&&e.isArray(g.balloons)&&!e.isArray(g.balloons[0])){g.balloons={root:g.balloons}}if(g.legend&&e.isArray(g.legend)&&!e.isArray(g.legend[0])){g.legend={root:g.legend}}}if(g.defaultSeries){var m=h.type!="line"?h.type:(g.defaultSeries.type?g.defaultSeries.type:(h.defaultSeries.type?h.defaultSeries.type:"line"));a(g.defaultSeries,m);if(g.defaultSeries.stackedWith){g.defaultSeries.stacked=g.defaultSeries.stackedWith;delete g.defaultSeries.stackedWith}}if(g.series){for(var k in g.series){var j=h.type!="line"?h.type:(g.series[k].type?g.series[k].type:(h.series[k].type?h.series[k].type:(m?m:"line")));a(g.series[k],j);if(g.series[k].values){for(var l in g.series[k].values){a(g.series[k].values[l],j)}}if(g.series[k].stackedWith){g.series[k].stacked=g.series[k].stackedWith;delete g.series[k].stackedWith}}}if(g.type=="line"){if(!g.features){g.features={}}if(!g.features.grid){g.features.grid={}}if(typeof g.gridNX!="undefined"){g.features.grid.nx=g.gridNX;delete g.gridNX}if(typeof g.gridNY!="undefined"){g.features.grid.ny=g.gridNY;delete g.gridNY}if(typeof g.gridProps!="undefined"){g.features.grid.props=g.gridProps;delete g.gridProps}if(typeof g.gridExtra!="undefined"){g.features.grid.extra=g.gridExtra;delete g.gridExtra}if(typeof g.gridForceBorder!="undefined"){g.features.grid.forceBorder=g.gridForceBorder;delete g.gridForceBorder}if(g.defaultAxis&&g.defaultAxis.normalize&&(g.defaultAxis.normalize=="auto"||g.defaultAxis.normalize=="autony")){g.defaultAxis.normalize=2}if(g.axis){for(var i in g.axis){if(g.axis[i]&&g.axis[i].normalize&&(g.axis[i].normalize=="auto"||g.axis[i].normalize=="autony")){g.axis[i].normalize=2}}}}return g}function a(i,g){if(i.color){var h=i.color;if(!i.plotProps){i.plotProps={}}if(g=="line"){if(i.plotProps&&!i.plotProps.stroke){i.plotProps.stroke=h}}else{if(i.plotProps&&!i.plotProps.fill){i.plotProps.fill=h}}if(!i.tooltip){i.tooltip={}}if(!i.tooltip.frameProps){i.tooltip.frameProps={}}if(i.tooltip&&i.tooltip.frameProps&&!i.tooltip.frameProps.stroke){i.tooltip.frameProps.stroke=h}if(!i.legend){i.legend={}}if(!i.legend.dotProps){i.legend.dotProps={}}if(i.legend.dotProps&&!i.legend.dotProps.fill){i.legend.dotProps.fill=h}if(g=="line"){if(!i.dotProps){i.dotProps={}}if(i.dotProps&&!i.dotProps.fill){i.dotProps.fill=h}if(!i.fillProps){i.fillProps={}}if(i.fillProps&&!i.fillProps.fill){i.fillProps.fill=h}}}}e.elycharts.common={_RaphaelInstance:function(k,g,i){var j=Raphael(k,g,i);j.customAttributes.slice=function(h,q,n,m,p,o){a1=360-o;a2=360-p;var l=(a2-a1)>180;a1=(a1%360)*Math.PI/180;a2=(a2%360)*Math.PI/180;if(a1==a2&&p!=o){a2+=359.99*Math.PI/180}return{path:m?[["M",h+n*Math.cos(a1),q+n*Math.sin(a1)],["A",n,n,0,+l,1,h+n*Math.cos(a2),q+n*Math.sin(a2)],["L",h+m*Math.cos(a2),q+m*Math.sin(a2)],["A",m,m,0,+l,0,h+m*Math.cos(a1),q+m*Math.sin(a1)],["z"]]:[["M",h,q],["l",n*Math.cos(a1),n*Math.sin(a1)],["A",n,n,0,+l,1,h+n*Math.cos(a2),q+n*Math.sin(a2)],["z"]]}};return j},_clone:function(i){if(i==null||typeof(i)!="object"){return i}if(i.constructor==Array){return[].concat(i)}var g=new i.constructor();for(var h in i){g[h]=this._clone(i[h])}return g},_mergeObjects:function(h,g){return e.extend(true,h,g)},compactUnits:function(k,h){for(var j=h.length-1;j>=0;j--){var g=k/Math.pow(1000,j+1);if(g>=1&&g*10%10==0){return g+h[j]}}return k},getElementOriginalAttrs:function(h){var g=e(h.node).data("original-attr");if(!g){g=h.attr();e(h.node).data("original-attr",g)}return g},findInPieces:function(k,m,j,g,l){for(var h=0;h<k.length;h++){if((typeof m==undefined||m==-1||m==false||k[h].section==m)&&(typeof j==undefined||j==-1||j==false||k[h].serie==j)&&(typeof g==undefined||g==-1||g==false||k[h].index==g)&&(typeof l==undefined||l==-1||l==false||k[h].subSection==l)){return k[h]}}return false},samePiecePath:function(h,g){return(((typeof h.section==undefined||h.section==-1||h.section==false)&&(typeof g.section==undefined||g.section==-1||g.section==false))||h.section==g.section)&&(((typeof h.serie==undefined||h.serie==-1||h.serie==false)&&(typeof g.serie==undefined||g.serie==-1||g.serie==false))||h.serie==g.serie)&&(((typeof h.index==undefined||h.index==-1||h.index==false)&&(typeof g.index==undefined||g.index==-1||g.index==false))||h.index==g.index)&&(((typeof h.subSection==undefined||h.subSection==-1||h.subSection==false)&&(typeof g.subSection==undefined||g.subSection==-1||g.subSection==false))||h.subSection==g.subSection)},executeIfChanged:function(l,k){if(!l.newopt){return true}for(var h=0;h<k.length;h++){if(k[h][k[h].length-1]=="*"){for(var g in l.newopt){if(g.substring(0,k[h].length-1)+"*"==k[h]){return true}}}else{if(k[h]=="series"&&(l.newopt.series||l.newopt.defaultSeries)){return true}else{if(k[h]=="axis"&&(l.newopt.axis||l.newopt.defaultAxis)){return true}else{if(k[h].substring(0,9)=="features."){k[h]=k[h].substring(9);if(l.newopt.features&&l.newopt.features[k[h]]){return true}}else{if(typeof l.newopt[k[h]]!="undefined"){return true}}}}}}return false},areaProps:function(i,l,j,g,k){var h;if(!k){if(typeof j=="undefined"||!j){h=i.opt[l.toLowerCase()]}else{h=this._clone(i.opt["default"+l]);if(i.opt[l.toLowerCase()]&&i.opt[l.toLowerCase()][j]){h=this._mergeObjects(h,i.opt[l.toLowerCase()][j])}if((typeof g!="undefined")&&g>=0&&h.values&&h.values[g]){h=this._mergeObjects(h,h.values[g])}}}else{h=this._clone(i.opt[k.toLowerCase()]);if(typeof j=="undefined"||!j){if(i.opt[l.toLowerCase()]&&i.opt[l.toLowerCase()][k.toLowerCase()]){h=this._mergeObjects(h,i.opt[l.toLowerCase()][k.toLowerCase()])}}else{if(i.opt["default"+l]&&i.opt["default"+l][k.toLowerCase()]){h=this._mergeObjects(h,i.opt["default"+l][k.toLowerCase()])}if(i.opt[l.toLowerCase()]&&i.opt[l.toLowerCase()][j]&&i.opt[l.toLowerCase()][j][k.toLowerCase()]){h=this._mergeObjects(h,i.opt[l.toLowerCase()][j][k.toLowerCase()])}if(h&&(typeof g!="undefined")&&g>0&&h.values&&h.values[g]){h=this._mergeObjects(h,h.values[g])}}}return h},absrectpath:function(h,j,g,i,k){return[["M",h,j],["L",h,i],["L",g,i],["L",g,j],["z"]]},linepathAnchors:function(i,h,t,r,o,n,k){var g=1;if(k&&k.length){g=k[1];k=k[0]}if(!k){k=1}var l=(t-i)/2,j=(o-t)/2,u=Math.atan((t-i)/Math.abs(r-h)),s=Math.atan((o-t)/Math.abs(r-n));u=h<r?Math.PI-u:u;s=n<r?Math.PI-s:s;if(g==2){if((u-Math.PI/2)*(s-Math.PI/2)>0){u=0;s=0}else{if(Math.abs(u-Math.PI/2)<Math.abs(s-Math.PI/2)){s=Math.PI-u}else{u=Math.PI-s}}}var m=Math.PI/2-((u+s)%(Math.PI*2))/2,w=l*Math.sin(m+u)/2/k,q=l*Math.cos(m+u)/2/k,v=j*Math.sin(m+s)/2/k,p=j*Math.cos(m+s)/2/k;return{x1:t-w,y1:r+q,x2:t+v,y2:r+p}},linepathRevert:function(k){var g=[],j=false;for(var h=k.length-1;h>=0;h--){switch(k[h][0]){case"M":case"L":if(!j){g.push([g.length?"L":"M",k[h][1],k[h][2]])}else{g.push(["C",j[0],j[1],j[2],j[3],k[h][1],k[h][2]])}j=false;break;case"C":if(!j){g.push([g.length?"L":"M",k[h][5],k[h][6]])}else{g.push(["C",j[0],j[1],j[2],j[3],k[h][5],k[h][6]])}j=[k[h][3],k[h][4],k[h][1],k[h][2]]}}return g},linepath:function(q,g){var r=[];if(g){var l=false;for(var h=0,m=q.length-1;h<m;h++){if(h){var p=this.linepathAnchors(q[h-1][0],q[h-1][1],q[h][0],q[h][1],q[h+1][0],q[h+1][1],g);r.push(["C",l[0],l[1],p.x1,p.y1,q[h][0],q[h][1]]);l=[p.x2,p.y2]}else{r.push(["M",q[h][0],q[h][1]]);l=[q[h][0],q[h][1]]}}if(l){r.push(["C",l[0],l[1],q[m][0],q[m][1],q[m][0],q[m][1]])}}else{for(var k=0;k<q.length;k++){var o=q[k][0],n=q[k][1]}r.push([k==0?"M":"L",o,n])}return r},lineareapath:function(j,h,g){var m=this.linepath(j,g),l=this.linepathRevert(this.linepath(h,g));for(var k=0;k<l.length;k++){m.push(!k?["L",l[0][1],l[0][2]]:l[k])}if(m.length){m.push(["z"])}return m},getX:function(g,h){switch(g[0]){case"CIRCLE":return g[1];case"RECT":return g[!h?1:3];case"SLICE":return g[1];default:return g[g.length-2]}},getY:function(g,h){switch(g[0]){case"CIRCLE":return g[2];case"RECT":return g[!h?2:4];case"SLICE":return g[2];default:return g[g.length-1]}},getCenter:function(j,k){if(!j.path){return false}if(j.path.length==0){return false}if(!k){k=[0,0]}if(j.center){return[j.center[0]+k[0],j.center[1]+k[1]]}var i=j.path[0];switch(i[0]){case"CIRCLE":return[i[1]+k[0],i[2]+k[1]];case"RECT":return[(i[1]+i[2])/2+k[0],(i[3]+i[4])/2+k[1]];case"SLICE":var h=i[5]+(i[6]-i[5])/2;var g=Math.PI/180;return[i[1]+(i[4]+((i[3]-i[4])/2)+k[0])*Math.cos(-h*g)+k[1]*Math.cos((-h-90)*g),i[2]+(i[4]+((i[3]-i[4])/2)+k[0])*Math.sin(-h*g)+k[1]*Math.sin((-h-90)*g)]}alert("ElyCharts: getCenter with complex path not supported");return false},movePath:function(t,A,r,n,g){var h=[],s;if(A.length==1&&A[0][0]=="RECT"){return[[A[0][0],this._movePathX(t,A[0][1],r[0],n),this._movePathY(t,A[0][2],r[1],n),this._movePathX(t,A[0][3],r[0],n),this._movePathY(t,A[0][4],r[1],n)]]}if(A.length==1&&A[0][0]=="SLICE"){if(!g){var z=A[0][5]+(A[0][6]-A[0][5])/2;var u=Math.PI/180;var w=A[0][1]+r[0]*Math.cos(-z*u)+r[1]*Math.cos((-z-90)*u);var v=A[0][2]+r[0]*Math.sin(-z*u)+r[1]*Math.cos((-z-90)*u);return[[A[0][0],w,v,A[0][3],A[0][4],A[0][5],A[0][6]]]}else{return[[A[0][0],A[0][1]+r[0],A[0][2]+r[1],A[0][3],A[0][4],A[0][5],A[0][6]]]}}if(A.length==1&&A[0][0]=="CIRCLE"){return[[A[0][0],A[0][1]+r[0],A[0][2]+r[1],A[0][3]]]}if(A.length==1&&A[0][0]=="TEXT"){return[[A[0][0],A[0][1],A[0][2]+r[0],A[0][3]+r[1]]]}if(A.length==1&&A[0][0]=="LINE"){for(s=0;s<A[0][1].length;s++){h.push([this._movePathX(t,A[0][1][s][0],r[0],n),this._movePathY(t,A[0][1][s][1],r[1],n)])}return[[A[0][0],h,A[0][2]]]}if(A.length==1&&A[0][0]=="LINEAREA"){for(s=0;s<A[0][1].length;s++){h.push([this._movePathX(t,A[0][1][s][0],r[0],n),this._movePathY(t,A[0][1][s][1],r[1],n)])}var l=[];for(s=0;s<A[0][2].length;s++){l.push([this._movePathX(t,A[0][2][s][0],r[0],n),this._movePathY(t,A[0][2][s][1],r[1],n)])}return[[A[0][0],h,l,A[0][3]]]}var m=[];for(var q=0;q<A.length;q++){var k=A[q];switch(k[0]){case"M":case"m":case"L":case"l":case"T":case"t":m.push([k[0],this._movePathX(t,k[1],r[0],n),this._movePathY(t,k[2],r[1],n)]);break;case"A":case"a":m.push([k[0],k[1],k[2],k[3],k[4],k[5],this._movePathX(t,k[6],r[0],n),this._movePathY(t,k[7],r[1],n)]);break;case"C":case"c":m.push([k[0],k[1],k[2],k[3],k[4],this._movePathX(t,k[5],r[0],n),this._movePathY(t,k[6],r[1],n)]);break;case"S":case"s":case"Q":case"q":m.push([k[0],k[1],k[2],this._movePathX(t,k[3],r[0],n),this._movePathY(t,k[4],r[1],n)]);break;case"z":case"Z":m.push([k[0]]);break}}return m},_movePathX:function(i,g,h,j){if(!j){return g+h}g=g+h;return h>0&&g>i.opt.width-i.opt.margins[1]?i.opt.width-i.opt.margins[1]:(h<0&&g<i.opt.margins[3]?i.opt.margins[3]:g)},_movePathY:function(h,j,g,i){if(!i){return j+g}j=j+g;return g>0&&j>h.opt.height-h.opt.margins[2]?h.opt.height-h.opt.margins[2]:(g<0&&j<h.opt.margins[0]?h.opt.margins[0]:j)},getSVGProps:function(k,g){var i=g?g:{};var h="path",j;if(k.length==1&&k[0][0]=="RECT"){j=c.absrectpath(k[0][1],k[0][2],k[0][3],k[0][4],k[0][5])}else{if(k.length==1&&k[0][0]=="SLICE"){h="slice";j=[k[0][1],k[0][2],k[0][3],k[0][4],k[0][5],k[0][6]]}else{if(k.length==1&&k[0][0]=="LINE"){j=c.linepath(k[0][1],k[0][2])}else{if(k.length==1&&k[0][0]=="LINEAREA"){j=c.lineareapath(k[0][1],k[0][2],k[0][3])}else{if(k.length==1&&(k[0][0]=="CIRCLE"||k[0][0]=="TEXT"||k[0][0]=="DOMELEMENT"||k[0][0]=="RELEMENT")){return g?g:false}else{j=k}}}}}if(h!="path"||(j&&j.length>0)){i[h]=j}else{if(!g){return false}}return i},showPath:function(j,l,m){l=this.preparePathShow(j,l);if(!m){m=j.paper}if(l.length==1&&l[0][0]=="CIRCLE"){return m.circle(l[0][1],l[0][2],l[0][3])}if(l.length==1&&l[0][0]=="TEXT"){return m.text(l[0][2],l[0][3],l[0][1])}var i=this.getSVGProps(l);var h=false;for(var g in i){h=true;break}return i&&h?m.path().attr(i):false},preparePathShow:function(g,h){return g.opt.features.pixelWorkAround.active?this.movePath(g,this._clone(h),[0.5,0.5],false,true):h},getPieceFullAttr:function(h,g){if(!g.fullattr){g.fullattr=this._clone(g.attr);if(g.path){switch(g.path[0][0]){case"CIRCLE":var i=this.preparePathShow(h,g.path);g.fullattr.cx=i[0][1];g.fullattr.cy=i[0][2];g.fullattr.r=i[0][3];break;case"TEXT":case"DOMELEMENT":case"RELEMENT":break;default:g.fullattr=this.getSVGProps(this.preparePathShow(h,g.path),g.fullattr)}}if(typeof g.fullattr.opacity=="undefined"){g.fullattr.opacity=1}}return g.fullattr},show:function(k,l){l=this.getSortedPathData(l);c.animationStackStart(k);var g=false;for(var h=0;h<l.length;h++){var j=l[h];if(typeof j.show=="undefined"||j.show){j.element=j.animation&&j.animation.element?j.animation.element:false;j.hide=false;if(!j.path){j.hide=true}else{if(j.path.length==1&&j.path[0][0]=="TEXT"){if(j.element){c.animationStackPush(k,j,j.element,false,j.animation.speed,j.animation.easing,j.animation.delay,true);j.animation.element=false}j.element=this.showPath(k,j.path);if(j.element&&k.newopt&&g){j.element.insertAfter(g)}}else{if(j.path.length==1&&j.path[0][0]=="DOMELEMENT"){}else{if(j.path.length==1&&j.path[0][0]=="RELEMENT"){if(j.element){c.animationStackPush(k,j,j.element,false,j.animation.speed,j.animation.easing,j.animation.delay,true);j.animation.element=false}j.element=j.path[0][1];if(j.element&&g){j.element.insertAfter(g)}j.attr=false}else{if(!j.element){if(j.animation&&j.animation.startPath&&j.animation.startPath.length){j.element=this.showPath(k,j.animation.startPath)}else{j.element=this.showPath(k,j.path)}if(j.element&&k.newopt&&g){j.element.insertAfter(g)}}}}}}if(j.element){if(j.attr){if(!j.animation){if(typeof j.attr.opacity=="undefined"){j.attr.opacity=1}j.element.attr(j.attr)}else{if(!j.animation.element){j.element.attr(j.animation.startAttr?j.animation.startAttr:j.attr)}c.animationStackPush(k,j,j.element,this.getPieceFullAttr(k,j),j.animation.speed,j.animation.easing,j.animation.delay)}}else{if(j.hide){c.animationStackPush(k,j,j.element,false,j.animation.speed,j.animation.easing,j.animation.delay)}}g=j.element}}}c.animationStackEnd(k)},getSortedPathData:function(l){res=[];for(var h=0;h<l.length;h++){var k=l[h];if(k.paths){for(var g=0;g<k.paths.length;g++){k.paths[g].pos=res.length;k.paths[g].parent=k;res.push(k.paths[g])}}else{k.pos=res.length;k.parent=false;res.push(k)}}return res.sort(function(j,i){var n=typeof j.attr=="undefined"||typeof j.attr.zindex=="undefined"?(!j.parent||typeof j.parent.attr=="undefined"||typeof j.parent.attr.zindex=="undefined"?0:j.parent.attr.zindex):j.attr.zindex;var m=typeof i.attr=="undefined"||typeof i.attr.zindex=="undefined"?(!i.parent||typeof i.parent.attr=="undefined"||typeof i.parent.attr.zindex=="undefined"?0:i.parent.attr.zindex):i.attr.zindex;return n<m?-1:(n>m?1:(j.pos<i.pos?-1:(j.pos>i.pos?1:0)))})},animationStackStart:function(g){if(!g.animationStackDepth||g.animationStackDepth==0){g.animationStackDepth=0;g.animationStack={}}g.animationStackDepth++},animationStackEnd:function(h){h.animationStackDepth--;if(h.animationStackDepth==0){for(var g in h.animationStack){this._animationStackAnimate(h.animationStack[g],g);delete h.animationStack[g]}h.animationStack={}}},animationStackPush:function(k,j,i,g,m,n,h,l){if(typeof h=="undefined"){h=0}if(!k.animationStackDepth||k.animationStackDepth==0){this._animationStackAnimate([{piece:j,object:i,props:g,speed:m,easing:n,force:l}],h)}else{if(!k.animationStack[h]){k.animationStack[h]=[]}k.animationStack[h].push({piece:j,object:i,props:g,speed:m,easing:n,force:l})}},_animationStackAnimate:function(g,i){var h=this;var j=function(){var l=g.pop();h._animationStackAnimateElement(l);while(g.length>0){var k=g.pop();h._animationStackAnimateElement(k,l)}};if(i>0){setTimeout(j,i)}else{j()}},_animationStackAnimateElement:function(g,i){if(g.force||!g.piece.animationInProgress){g.object.stop();if(!g.props){g.props={opacity:0}}if(!g.speed||g.speed<=0){g.object.attr(g.props);g.piece.animationInProgress=false;return}g.piece.animationInProgress=true;var h=function(){g.piece.animationInProgress=false};if(i){g.object.animateWith(i,g.props,g.speed,g.easing?g.easing:"linear",h)}else{g.object.animate(g.props,g.speed,g.easing?g.easing:"linear",h)}}}};var c=e.elycharts.common;e.elycharts.featuresmanager={managers:[],initialized:false,register:function(h,g){e.elycharts.featuresmanager.managers.push([g,h]);e.elycharts.featuresmanager.initialized=false},init:function(){e.elycharts.featuresmanager.managers.sort(function(h,g){return h[0]<g[0]?-1:(h[0]==g[0]?0:1)});e.elycharts.featuresmanager.initialized=true},beforeShow:function(h,j){if(!e.elycharts.featuresmanager.initialized){this.init()}for(var g=0;g<e.elycharts.featuresmanager.managers.length;g++){if(e.elycharts.featuresmanager.managers[g][1].beforeShow){e.elycharts.featuresmanager.managers[g][1].beforeShow(h,j)}}},afterShow:function(h,j){if(!e.elycharts.featuresmanager.initialized){this.init()}for(var g=0;g<e.elycharts.featuresmanager.managers.length;g++){if(e.elycharts.featuresmanager.managers[g][1].afterShow){e.elycharts.featuresmanager.managers[g][1].afterShow(h,j)}}},onMouseOver:function(k,l,h,g){if(!e.elycharts.featuresmanager.initialized){this.init()}for(var j=0;j<e.elycharts.featuresmanager.managers.length;j++){if(e.elycharts.featuresmanager.managers[j][1].onMouseOver){e.elycharts.featuresmanager.managers[j][1].onMouseOver(k,l,h,g)}}},onMouseOut:function(k,l,h,g){if(!e.elycharts.featuresmanager.initialized){this.init()}for(var j=0;j<e.elycharts.featuresmanager.managers.length;j++){if(e.elycharts.featuresmanager.managers[j][1].onMouseOut){e.elycharts.featuresmanager.managers[j][1].onMouseOut(k,l,h,g)}}},onMouseEnter:function(k,l,h,g){if(!e.elycharts.featuresmanager.initialized){this.init()}for(var j=0;j<e.elycharts.featuresmanager.managers.length;j++){if(e.elycharts.featuresmanager.managers[j][1].onMouseEnter){e.elycharts.featuresmanager.managers[j][1].onMouseEnter(k,l,h,g)}}},onMouseChanged:function(k,l,h,g){if(!e.elycharts.featuresmanager.initialized){this.init()}for(var j=0;j<e.elycharts.featuresmanager.managers.length;j++){if(e.elycharts.featuresmanager.managers[j][1].onMouseChanged){e.elycharts.featuresmanager.managers[j][1].onMouseChanged(k,l,h,g)}}},onMouseExit:function(k,l,h,g){if(!e.elycharts.featuresmanager.initialized){this.init()}for(var j=0;j<e.elycharts.featuresmanager.managers.length;j++){if(e.elycharts.featuresmanager.managers[j][1].onMouseExit){e.elycharts.featuresmanager.managers[j][1].onMouseExit(k,l,h,g)}}}}})(jQuery);(function(c){var a=c.elycharts.featuresmanager;var b=c.elycharts.common;c.elycharts.anchormanager={afterShow:function(f,h){if(!f.opt.anchors){return}if(!f.anchorBinds){f.anchorBinds=[]}while(f.anchorBinds.length){var d=f.anchorBinds.pop();c(d[0]).unbind(d[1],d[2])}for(var e=0;e<f.mouseAreas.length;e++){var g=f.mouseAreas[e].piece?f.mouseAreas[e].piece.serie:false;var j;if(g){j=f.opt.anchors[g][f.mouseAreas[e].index]}else{j=f.opt.anchors[f.mouseAreas[e].index]}if(j&&f.mouseAreas[e].props.anchor&&f.mouseAreas[e].props.anchor.highlight){(function(m,k,n,l){var i=function(){l.anchorMouseOver(m,k)};var o=function(){l.anchorMouseOut(m,k)};if(!m.mouseAreas[e].props.anchor.useMouseEnter){m.anchorBinds.push([n,"mouseover",i]);m.anchorBinds.push([n,"mouseout",o]);c(n).mouseover(i);c(n).mouseout(o)}else{m.anchorBinds.push([n,"mouseenter",i]);m.anchorBinds.push([n,"mouseleave",o]);c(n).mouseenter(i);c(n).mouseleave(o)}})(f,f.mouseAreas[e],j,this)}}f.onAnchors=[]},anchorMouseOver:function(e,d){c.elycharts.highlightmanager.onMouseOver(e,d.piece?d.piece.serie:false,d.index,d)},anchorMouseOut:function(e,d){c.elycharts.highlightmanager.onMouseOut(e,d.piece?d.piece.serie:false,d.index,d)},onMouseOver:function(f,g,e,d){if(!f.opt.anchors){return}if(d.props.anchor&&d.props.anchor.addClass){var h;if(g){h=f.opt.anchors[g][d.index]}else{h=f.opt.anchors[d.index]}if(h){c(h).addClass(d.props.anchor.addClass);f.onAnchors.push([h,d.props.anchor.addClass])}}},onMouseOut:function(f,g,e,d){if(!f.opt.anchors){return}while(f.onAnchors.length>0){var h=f.onAnchors.pop();c(h[0]).removeClass(h[1])}}};c.elycharts.featuresmanager.register(c.elycharts.anchormanager,30)})(jQuery);(function(b){var a=b.elycharts.common;b.elycharts.animationmanager={beforeShow:function(c,d){if(!c.newopt){this.startAnimation(c,d)}else{this.stepAnimation(c,d)}},stepAnimation:function(c,d){d=this._stepAnimationInt(c,c.pieces,d)},_stepAnimationInt:function(m,d,c,o,k,h){var f=[],l;var e=0;for(var g=0;g<d.length;g++){var n=a.areaProps(m,o?o:d[g].section,k?k:d[g].serie);if(n&&n.stepAnimation){n=n.stepAnimation}else{n=m.opt.features.animation.stepAnimation}if(c&&(e>=c.length||!a.samePiecePath(d[g],c[e]))){if(!h){d[g].show=false;f.push(d[g])}else{l={path:false,attr:false,show:true};l.animation={element:d[g].element?d[g].element:false,speed:n&&n.speed?n.speed:300,easing:n&&n.easing?n.easing:"",delay:n&&n.delay?n.delay:0};f.push(l)}}else{l=c?c[e]:{path:false,attr:false};l.show=true;if(typeof d[g].paths=="undefined"){l.animation={element:d[g].element?d[g].element:false,speed:n&&n.speed?n.speed:300,easing:n&&n.easing?n.easing:"",delay:n&&n.delay?n.delay:0};if(!d[g].element){l.animation.startAttr={opacity:0}}}else{l.paths=this._stepAnimationInt(m,d[g].paths,c[e].paths,d[g].section,d[g].serie,true)}f.push(l);e++}}if(c){for(;e<c.length;e++){f.push(c[e])}}return f},startAnimation:function(e,f){for(var c=0;c<f.length;c++){if(f[c].paths||f[c].path){var d=a.areaProps(e,f[c].section,f[c].serie);if(d&&d.startAnimation){d=d.startAnimation}else{d=e.opt.features.animation.startAnimation}if(d.active){if(d.type=="simple"||f[c].section!="Series"){this.animationSimple(e,d,f[c])}if(d.type=="grow"){this.animationGrow(e,d,f[c])}if(d.type=="avg"){this.animationAvg(e,d,f[c])}if(d.type=="reg"){this.animationReg(e,d,f[c])}}}}},_animationPiece:function(d,f,e){if(d.paths){for(var c=0;c<d.paths.length;c++){this._animationPiece(d.paths[c],f,e)}}else{if(d.path){d.animation={speed:f.speed,easing:f.easing,delay:f.delay,startPath:[],startAttr:a._clone(d.attr)};if(f.propsTo){d.attr=a._mergeObjects(d.attr,f.propsTo)}if(f.propsFrom){d.animation.startAttr=a._mergeObjects(d.animation.startAttr,f.propsFrom)}if(e&&f[e.toLowerCase()+"PropsFrom"]){d.animation.startAttr=a._mergeObjects(d.animation.startAttr,f[e.toLowerCase()+"PropsFrom"])}if(typeof d.animation.startAttr.opacity!="undefined"&&typeof d.attr.opacity=="undefined"){d.attr.opacity=1}}}},animationSimple:function(e,d,c){this._animationPiece(c,d,c.subSection)},animationGrow:function(g,f,e){this._animationPiece(e,f,e.subSection);var d,h,j;switch(g.opt.type){case"line":j=g.opt.height-g.opt.margins[2];switch(e.subSection){case"Plot":if(!e.paths){h=["LINE",[],e.path[0][2]];for(d=0;d<e.path[0][1].length;d++){h[1].push([e.path[0][1][d][0],j])}e.animation.startPath.push(h)}else{for(d=0;d<e.paths.length;d++){if(e.paths[d].path){e.paths[d].animation.startPath.push(["RECT",e.paths[d].path[0][1],j,e.paths[d].path[0][3],j])}}}break;case"Fill":h=["LINEAREA",[],[],e.path[0][3]];for(d=0;d<e.path[0][1].length;d++){h[1].push([e.path[0][1][d][0],j]);h[2].push([e.path[0][2][d][0],j])}e.animation.startPath.push(h);break;case"Dot":for(d=0;d<e.paths.length;d++){if(e.paths[d].path){e.paths[d].animation.startPath.push(["CIRCLE",e.paths[d].path[0][1],j,e.paths[d].path[0][3]])}}break}break;case"pie":if(e.subSection=="Plot"){for(d=0;d<e.paths.length;d++){if(e.paths[d].path&&e.paths[d].path[0][0]=="SLICE"){e.paths[d].animation.startPath.push(["SLICE",e.paths[d].path[0][1],e.paths[d].path[0][2],e.paths[d].path[0][4]+e.paths[d].path[0][3]*0.1,e.paths[d].path[0][4],e.paths[d].path[0][5],e.paths[d].path[0][6]])}}}break;case"funnel":alert("Unsupported animation GROW for funnel");break;case"barline":var c;if(e.section=="Series"&&e.subSection=="Plot"){if(!f.subType){c=g.opt.direction!="rtl"?g.opt.margins[3]:g.opt.width-g.opt.margins[1]}else{if(f.subType==1){c=g.opt.direction!="rtl"?g.opt.width-g.opt.margins[1]:g.opt.margins[3]}}for(d=0;d<e.paths.length;d++){if(e.paths[d].path){if(!f.subType||f.subType==1){e.paths[d].animation.startPath.push(["RECT",c,e.paths[d].path[0][2],c,e.paths[d].path[0][4],e.paths[d].path[0][5]])}else{j=(e.paths[d].path[0][2]+e.paths[d].path[0][4])/2;e.paths[d].animation.startPath.push(["RECT",e.paths[d].path[0][1],j,e.paths[d].path[0][3],j,e.paths[d].path[0][5]])}}}}break}},_animationAvgXYArray:function(c){var e=[],f=0,d;for(d=0;d<c.length;d++){f+=c[d][1]}f=f/c.length;for(d=0;d<c.length;d++){e.push([c[d][0],f])}return e},animationAvg:function(g,f,e){this._animationPiece(e,f,e.subSection);var h=0,d,c;switch(g.opt.type){case"line":switch(e.subSection){case"Plot":if(!e.paths){e.animation.startPath.push(["LINE",this._animationAvgXYArray(e.path[0][1]),e.path[0][2]])}else{c=0;for(d=0;d<e.paths.length;d++){if(e.paths[d].path){c++;h+=e.paths[d].path[0][2]}}h=h/c;for(d=0;d<e.paths.length;d++){if(e.paths[d].path){e.paths[d].animation.startPath.push(["RECT",e.paths[d].path[0][1],h,e.paths[d].path[0][3],e.paths[d].path[0][4]])}}}break;case"Fill":e.animation.startPath.push(["LINEAREA",this._animationAvgXYArray(e.path[0][1]),this._animationAvgXYArray(e.path[0][2]),e.path[0][3]]);break;case"Dot":c=0;for(d=0;d<e.paths.length;d++){if(e.paths[d].path){c++;h+=e.paths[d].path[0][2]}}h=h/c;for(d=0;d<e.paths.length;d++){if(e.paths[d].path){e.paths[d].animation.startPath.push(["CIRCLE",e.paths[d].path[0][1],h,e.paths[d].path[0][3]])}}break}break;case"pie":var j=360/e.paths.length;if(e.subSection=="Plot"){for(d=0;d<e.paths.length;d++){if(e.paths[d].path&&e.paths[d].path[0][0]=="SLICE"){e.paths[d].animation.startPath.push(["SLICE",e.paths[d].path[0][1],e.paths[d].path[0][2],e.paths[d].path[0][3],e.paths[d].path[0][4],d*j,(d+1)*j])}}}break;case"funnel":alert("Unsupported animation AVG for funnel");break;case"barline":alert("Unsupported animation AVG for barline");break}},_animationRegXYArray:function(d){var g=[];var j=d.length;var h=d[0][1];var f=d[j-1][1];for(var e=0;e<d.length;e++){g.push([d[e][0],h+(f-h)/(j-1)*e])}return g},animationReg:function(j,h,g){this._animationPiece(g,h,g.subSection);var e,k,f,d;switch(j.opt.type){case"line":switch(g.subSection){case"Plot":if(!g.paths){g.animation.startPath.push(["LINE",this._animationRegXYArray(g.path[0][1]),g.path[0][2]])}else{k=g.paths.length;if(k>1){for(e=0;!g.paths[e].path&&e<g.paths.length;e++){}f=g.paths[e].path?a.getY(g.paths[e].path[0]):0;for(e=g.paths.length-1;!g.paths[e].path&&e>=0;e--){}d=g.paths[e].path?a.getY(g.paths[e].path[0]):0;for(e=0;e<g.paths.length;e++){if(g.paths[e].path){g.paths[e].animation.startPath.push(["RECT",g.paths[e].path[0][1],f+(d-f)/(k-1)*e,g.paths[e].path[0][3],g.paths[e].path[0][4]])}}}}break;case"Fill":g.animation.startPath.push(["LINEAREA",this._animationRegXYArray(g.path[0][1]),this._animationRegXYArray(g.path[0][2]),g.path[0][3]]);break;case"Dot":k=g.paths.length;if(k>1){for(e=0;!g.paths[e].path&&e<g.paths.length;e++){}f=g.paths[e].path?a.getY(g.paths[e].path[0]):0;for(e=g.paths.length-1;!g.paths[e].path&&e>=0;e--){}d=g.paths[e].path?a.getY(g.paths[e].path[0]):0;for(e=0;e<g.paths.length;e++){if(g.paths[e].path){g.paths[e].animation.startPath.push(["CIRCLE",g.paths[e].path[0][1],f+(d-f)/(k-1)*e,g.paths[e].path[0][3]])}}}break}break;case"pie":alert("Unsupported animation REG for pie");break;case"funnel":alert("Unsupported animation REG for funnel");break;case"barline":alert("Unsupported animation REG for barline");break}}};b.elycharts.featuresmanager.register(b.elycharts.animationmanager,10);b.elycharts.frameanimationmanager={beforeShow:function(c,d){if(c.opt.features.frameAnimation.active){b(c.container.get(0)).css(c.opt.features.frameAnimation.cssFrom)}},afterShow:function(c,d){if(c.opt.features.frameAnimation.active){c.container.animate(c.opt.features.frameAnimation.cssTo,c.opt.features.frameAnimation.speed,c.opt.features.frameAnimation.easing)}}};b.elycharts.featuresmanager.register(b.elycharts.frameanimationmanager,90)})(jQuery);(function(c){var a=c.elycharts.featuresmanager;var b=c.elycharts.common;c.elycharts.balloonmanager={afterShow:function(h,j){if(h.opt.features.balloons.active&&h.opt.balloons&&h.opt.type=="funnel"){var f=h.opt.features.balloons;var d=false,k=false;for(var g=0;g<j.length;g++){if(j[g].section=="Series"&&j[g].subSection=="Plot"){for(var e=0;e<j[g].paths.length;e++){if(h.opt.balloons[j[g].serie]&&h.opt.balloons[j[g].serie][e]){d=j[g].serie;k=e;this.drawBalloon(h,d,e,j[g].paths[e].rect)}}}else{if(d&&j[g].section=="Sector"&&j[g].serie=="bottom"&&!j[g].subSection&&k<h.opt.balloons[d].length-1){this.drawBalloon(h,d,h.opt.balloons[d].length-1,j[g].rect)}}}}},drawBalloon:function(g,f,h,k){var i=g.opt.features.balloons;var m=g.opt.balloons[f][h];var d={position:"absolute","z-index":25,margin:k[1]+"px 0 0 "+i.left+"px",height:(i.height?i.height:k[3]-k[1])-i.padding[0]*2,width:i.width?i.width:k[0],padding:i.padding[0]+"px "+i.padding[1]+"px"};if(typeof m=="string"){c("<div></div>").css(d).css(i.style).html(m).prependTo(g.container)}else{c(m).css(d).css(i.style).prependTo(g.container)}if(i.line){var l=[];for(var e=0;e<i.line.length;e++){if(e==0){l.push(["M",k[0]-i.line[e][0],k[1]+i.line[e][1]])}else{if(e==i.line.length-1){l.push(["L",i.left+(i.width?i.width:k[0])-i.line[e][0],k[1]+i.line[e][1]])}else{l.push(["L",k[0]-i.line[e][0],k[1]+i.line[e][1]])}}}b.showPath(g,l).attr(i.lineProps)}}};c.elycharts.featuresmanager.register(c.elycharts.balloonmanager,30)})(jQuery);(function(b){var a=b.elycharts.common;b.elycharts.highlightmanager={afterShow:function(c,d){c.highlighted=[]},onMouseOver:function(D,s,j,G){var r,c;for(var B=0;B<G.pieces.length;B++){if(G.pieces[B].section=="Series"&&G.pieces[B].paths&&(!s||G.pieces[B].serie==s)&&G.pieces[B].paths[j]&&G.pieces[B].paths[j].element){var e=G.pieces[B].paths[j];c=e.element;r=e.path;var u=a.getElementOriginalAttrs(c);var f=s?G.props:a.areaProps(D,G.pieces[B].section,G.pieces[B].serie);var q,F,v;if(r&&f.highlight){if(f.highlight.scale){if(r[0][0]=="RECT"){var n=r[0][3]-r[0][1];var C=r[0][4]-r[0][2];r=[["RECT",r[0][1],r[0][2]-C*(f.highlight.scale[1]-1),r[0][3]+n*(f.highlight.scale[0]-1),r[0][4]]];a.animationStackPush(D,e,c,a.getSVGProps(a.preparePathShow(D,r)),f.highlight.scaleSpeed,f.highlight.scaleEasing)}else{if(r[0][0]=="SLICE"){var E=(r[0][6]-r[0][5])*(f.highlight.scale[1]-1)/2;if(E>90){E=90}r=[["SLICE",r[0][1],r[0][1],r[0][3]*f.highlight.scale[0],r[0][4],r[0][5]-E,r[0][6]+E]];a.animationStackPush(D,e,c,a.getSVGProps(a.preparePathShow(D,r)),f.highlight.scaleSpeed,f.highlight.scaleEasing)}else{if(D.opt.type=="funnel"){var o=(e.rect[2]-e.rect[0])*(f.highlight.scale[0]-1)/2;var m=(e.rect[3]-e.rect[1])*(f.highlight.scale[1]-1)/2;a.animationStackStart(D);r=[a.movePath(D,[r[0]],[-o,-m])[0],a.movePath(D,[r[1]],[+o,-m])[0],a.movePath(D,[r[2]],[+o,+m])[0],a.movePath(D,[r[3]],[-o,+m])[0],r[4]];a.animationStackPush(D,e,c,a.getSVGProps(a.preparePathShow(D,r)),f.highlight.scaleSpeed,f.highlight.scaleEasing,0,true);q=false;if(j>0){F=G.pieces[B].paths[j-1];q=F.element;v=F.path}else{F=a.findInPieces(G.pieces,"Sector","top");if(F){q=F.element;v=F.path}}if(q){v=[v[0],v[1],a.movePath(D,[v[2]],[+o,-m])[0],a.movePath(D,[v[3]],[-o,-m])[0],v[4]];a.animationStackPush(D,F,q,a.getSVGProps(a.preparePathShow(D,v)),f.highlight.scaleSpeed,f.highlight.scaleEasing,0,true);D.highlighted.push({piece:F,cfg:f.highlight})}q=false;if(j<G.pieces[B].paths.length-1){F=G.pieces[B].paths[j+1];q=F.element;v=F.path}else{F=a.findInPieces(G.pieces,"Sector","bottom");if(F){q=F.element;v=F.path}}if(q){v=[a.movePath(D,[v[0]],[-o,+m])[0],a.movePath(D,[v[1]],[+o,+m])[0],v[2],v[3],v[4]];a.animationStackPush(D,F,q,a.getSVGProps(a.preparePathShow(D,v)),f.highlight.scaleSpeed,f.highlight.scaleEasing,0,true);D.highlighted.push({piece:F,cfg:f.highlight})}a.animationStackEnd(D)}}}}if(f.highlight.newProps){for(var H in f.highlight.newProps){if(typeof u[H]=="undefined"){u[H]=false}}a.animationStackPush(D,e,c,f.highlight.newProps)}if(f.highlight.move){var g=b.isArray(f.highlight.move)?f.highlight.move:[f.highlight.move,0];r=a.movePath(D,r,g);a.animationStackPush(D,e,c,a.getSVGProps(a.preparePathShow(D,r)),f.highlight.moveSpeed,f.highlight.moveEasing)}D.highlighted.push({piece:e,cfg:f.highlight});if(f.highlight.overlayProps){c=a.showPath(D,r).attr(f.highlight.overlayProps);u=false;D.highlighted.push({element:c,attr:u,cfg:f.highlight})}}}}if(D.opt.features.highlight.indexHighlight&&D.opt.type=="line"){var p=D.opt.features.highlight.indexHighlight;if(p=="auto"){p=(D.indexCenter=="bar"?"bar":"line")}var A=(D.opt.width-D.opt.margins[3]-D.opt.margins[1])/(D.opt.labels.length>0?D.opt.labels.length:1);var z=(D.opt.width-D.opt.margins[3]-D.opt.margins[1])/(D.opt.labels.length>1?D.opt.labels.length-1:1);var l=true;switch(p){case"bar":r=[["RECT",D.opt.margins[3]+j*A,D.opt.margins[0],D.opt.margins[3]+(j+1)*A,D.opt.height-D.opt.margins[2]]];break;case"line":l=false;case"barline":var k=Math.round((l?A/2:0)+D.opt.margins[3]+j*(l?A:z));r=[["M",k,D.opt.margins[0]],["L",k,D.opt.height-D.opt.margins[2]]]}if(r){c=a.showPath(D,r).attr(D.opt.features.highlight.indexHighlightProps);D.highlighted.push({element:c,attr:false,cfg:D.opt.features.highlight})}}},onMouseOut:function(e,f,d,c){while(e.highlighted.length>0){var g=e.highlighted.pop();if(g.piece){a.animationStackPush(e,g.piece,g.piece.element,a.getPieceFullAttr(e,g.piece),g.cfg.restoreSpeed,g.cfg.restoreEasing,0,true)}else{g.element.remove()}}}};b.elycharts.featuresmanager.register(b.elycharts.highlightmanager,21)})(jQuery);(function(b){var a=b.elycharts.common;b.elycharts.labelmanager={beforeShow:function(f,g){if(!a.executeIfChanged(f,["labels","values","series"])){return}if(f.opt.labels&&(f.opt.type=="pie"||f.opt.type=="funnel")){var j=false;var h;for(var d=0;d<g.length;d++){if(g[d].section=="Series"&&g[d].subSection=="Plot"){var e=a.areaProps(f,"Series",g[d].serie);if(f.emptySeries&&f.opt.series.empty){e.label=b.extend(true,e.label,f.opt.series.empty.label)}if(e&&e.label&&e.label.active){h=[];for(var c=0;c<g[d].paths.length;c++){if(g[d].paths[c].path){j=c;h.push(this.showLabel(f,g[d],g[d].paths[c],g[d].serie,c,g))}else{h.push({path:false,attr:false})}}g.push({section:g[d].section,serie:g[d].serie,subSection:"Label",paths:h})}}else{if(g[d].section=="Sector"&&g[d].serie=="bottom"&&!g[d].subSection&&j<f.opt.labels.length-1){h=[];h.push(this.showLabel(f,g[d],g[d],"Series",f.opt.labels.length-1,g));g.push({section:g[d].section,serie:g[d].serie,subSection:"Label",paths:h})}}}}},showLabel:function(n,t,s,l,o,k){var j=a.areaProps(n,"Series",l,o);if(n.opt.labels[o]||j.label.label){var h=s;var r=j.label.label?j.label.label:n.opt.labels[o];var d=a.getCenter(h,j.label.offset);if(!j.label.html){var q=j.label.props;if(j.label.frameAnchor){q=a._clone(j.label.props);q["text-anchor"]=j.label.frameAnchor[0];q["alignment-baseline"]=j.label.frameAnchor[1]}return{path:[["TEXT",r,d[0],d[1]]],attr:q}}else{var m=1;var g=a._clone(j.label.style);var f=(typeof g.opacity!="undefined");if(f){m=g.opacity;g.opacity=0}g.position="absolute";g["z-index"]=25;var i;if(typeof r=="string"){i=b("<div>"+r+"</div>").css(g).prependTo(n.container)}else{i=b(r).css(g).prependTo(n.container)}if(n.opt.features.debug.active&&i.height()==0){alert("DEBUG: Al gestore label e' stata passata una label ancora senza dimensioni, quindi ancora non disegnata. Per questo motivo il posizionamento potrebbe non essere correto.")}var e=d[0];var c=d[1];if(!j.label.frameAnchor||j.label.frameAnchor[0]=="middle"){e-=i.width()/2}else{if(j.label.frameAnchor&&j.label.frameAnchor[0]=="end"){e-=i.width()}}if(!j.label.frameAnchor||j.label.frameAnchor[1]=="middle"){c-=i.height()/2}else{if(j.label.frameAnchor&&j.label.frameAnchor[1]=="top"){c-=i.height()}}if(f){i.css({margin:c+"px 0 0 "+e+"px",opacity:m})}else{i.css({margin:c+"px 0 0 "+e+"px"})}return{path:[["DOMELEMENT",i]],attr:false}}}return false}};b.elycharts.featuresmanager.register(b.elycharts.labelmanager,5)})(jQuery);(function(b){var a=b.elycharts.common;b.elycharts.legendmanager={afterShow:function(F,e){if(!F.opt.legend||F.opt.legend.length==0){return}var c=F.opt.features.legend;if(c.x=="auto"){var z=1;c.x=0}if(c.width=="auto"){var g=1;c.width=F.opt.width}var o=[["RECT",c.x,c.y,c.x+c.width,c.y+c.height,c.r]];var A=a.showPath(F,o).attr(c.borderProps);if(z||g){A.hide()}var C=0;var r=[];for(var v in F.opt.legend){if(F.opt.type!="pie"){var I={};I[v]=F.opt.legend[v];var d=F.opt.legend.length}else{var I=F.opt.legend[v];var d=F.opt.legend[v].length}for(var D in I){var f=a.areaProps(F,"Series",v,F.opt.type=="pie"?D:false);var j=f.legend&&f.legend.dotProps?f.legend.dotProps:c.dotProps;var H=f.legend&&f.legend.dotType?f.legend.dotType:c.dotType;var G=f.legend&&f.legend.dotWidth?f.legend.dotWidth:c.dotWidth;var u=f.legend&&f.legend.dotHeight?f.legend.dotHeight:c.dotHeight;var s=f.legend&&f.legend.dotR?f.legend.dotR:c.dotR;var l=f.legend&&f.legend.textProps?f.legend.textProps:c.textProps;if(!c.horizontal){var E=(c.height-c.margins[0]-c.margins[2])/d;var n=c.width-c.margins[1]-c.margins[3];var m=Math.floor(c.x+c.margins[3]);var k=Math.floor(c.y+c.margins[0]+E*D)}else{var E=c.height-c.margins[0]-c.margins[2];if(!c.itemWidth||c.itemWidth=="fixed"){var n=(c.width-c.margins[1]-c.margins[3])/d;var m=Math.floor(c.x+c.margins[3]+n*D)}else{var n=(c.width-c.margins[1]-c.margins[3])-C;var m=c.x+c.margins[3]+C}var k=Math.floor(c.y+c.margins[0])}if(H=="rect"){r.push(a.showPath(F,[["RECT",c.dotMargins[0]+m,k+Math.floor((E-u)/2),c.dotMargins[0]+m+G,k+Math.floor((E-u)/2)+u,s]]).attr(j));var B=c.dotMargins[0]+G+c.dotMargins[1]}else{if(H=="circle"){r.push(a.showPath(F,[["CIRCLE",c.dotMargins[0]+m+s,k+s,s]]).attr(j));var B=c.dotMargins[0]+s*2+c.dotMargins[1]}}var q=I[D];var p=a.showPath(F,[["TEXT",q,m+B,k+Math.ceil(E/2)+(b.browser.msie?2:0)]]).attr({"text-anchor":"start"}).attr(l);r.push(p);while(p.getBBox().width>(n-B)&&p.getBBox().width>10){q=q.substring(0,q.length-1);p.attr({text:q})}p.show();if(c.horizontal&&c.itemWidth=="auto"){C+=B+p.getBBox().width+4}else{if(!c.horizontal&&g){C=p.getBBox().width+B>C?p.getBBox().width+B:C}else{C+=n}}}}if(g){c.width=C+c.margins[3]+c.margins[1]}if(z){c.x=Math.floor((F.opt.width-c.width)/2);for(var D in r){if(r[D].attrs.x){r[D].attr("x",r[D].attrs.x+c.x)}else{r[D].attr("path",a.movePath(F,r[D].attrs.path,[c.x,0]))}}}if(g||z){o=[["RECT",c.x,c.y,c.x+c.width,c.y+c.height,c.r]];A.attr(a.getSVGProps(a.preparePathShow(F,o)));A.show()}}};b.elycharts.featuresmanager.register(b.elycharts.legendmanager,90)})(jQuery);(function(c){var a=c.elycharts.featuresmanager;var b=c.elycharts.common;c.elycharts.mousemanager={afterShow:function(m,g){if(!m.opt.interactive){return}if(m.mouseLayer){m.mouseLayer.remove();m.mouseLayer=null;m.mousePaper.remove();m.mousePaper=null;m.mouseTimer=null;m.mouseAreas=null}m.mouseLayer=c("<div></div>").css({position:"absolute","z-index":20,opacity:0}).prependTo(m.container);m.mousePaper=b._RaphaelInstance(m.mouseLayer.get(0),m.opt.width,m.opt.height);var f=m.mousePaper;if(m.opt.features.debug.active&&typeof DP_Debug!="undefined"){m.paper.text(m.opt.width,m.opt.height-5,"DEBUG").attr({"text-anchor":"end",stroke:"red",opacity:0.1});f.text(m.opt.width,m.opt.height-5,"DEBUG").attr({"text-anchor":"end",stroke:"red",opacity:0.1}).click(function(){DP_Debug.dump(m.opt,"",false,4)})}var k,h;m.mouseAreas=[];if(m.opt.features.mousearea.type=="single"){for(k=0;k<g.length;k++){if(g[k].mousearea){if(!g[k].paths){if(g[k].path.length>=1&&(g[k].path[0][0]=="LINE"||g[k].path[0][0]=="LINEAREA")){for(h=0;h<g[k].path[0][1].length;h++){var n=b.areaProps(m,g[k].section,g[k].serie);if(n.mouseareaShowOnNull||g[k].section!="Series"||m.opt.values[g[k].serie][h]!=null){m.mouseAreas.push({path:[["CIRCLE",g[k].path[0][1][h][0],g[k].path[0][1][h][1],10]],piece:g[k],pieces:g,index:h,props:n})}}}else{for(h=0;h<g[k].path.length;h++){m.mouseAreas.push({path:[["CIRCLE",b.getX(g[k].path[h]),b.getY(g[k].path[h]),10]],piece:g[k],pieces:g,index:h,props:b.areaProps(m,g[k].section,g[k].serie)})}}}else{if(g[k].paths){for(h=0;h<g[k].paths.length;h++){if(g[k].paths[h].path){m.mouseAreas.push({path:g[k].paths[h].path,piece:g[k],pieces:g,index:h,props:b.areaProps(m,g[k].section,g[k].serie)})}}}}}}}else{var d=m.opt.features.mousearea.indexCenter;if(d=="auto"){d=m.indexCenter}var e,p;if(d=="bar"){p=(m.opt.width-m.opt.margins[3]-m.opt.margins[1])/(m.opt.labels.length>0?m.opt.labels.length:1);e=m.opt.margins[3]}else{p=(m.opt.width-m.opt.margins[3]-m.opt.margins[1])/(m.opt.labels.length>1?m.opt.labels.length-1:1);e=m.opt.margins[3]-p/2}for(var l in m.opt.labels){m.mouseAreas.push({path:[["RECT",e+l*p,m.opt.margins[0],e+(l+1)*p,m.opt.height-m.opt.margins[2]]],piece:false,pieces:g,index:parseInt(l),props:m.opt.defaultSeries})}}var o=false;if(!m.opt.features.mousearea.syncTag){m.mouseareaenv={chartEnv:false,mouseObj:false,caller:false,inArea:-1,timer:false};o=m.mouseareaenv}else{if(!c.elycharts.mouseareaenv){c.elycharts.mouseareaenv={}}if(!c.elycharts.mouseareaenv[m.opt.features.mousearea.syncTag]){c.elycharts.mouseareaenv[m.opt.features.mousearea.syncTag]={chartEnv:false,mouseObj:false,caller:false,inArea:-1,timer:false}}o=c.elycharts.mouseareaenv[m.opt.features.mousearea.syncTag]}for(k=0;k<m.mouseAreas.length;k++){m.mouseAreas[k].area=b.showPath(m,m.mouseAreas[k].path,f).attr({stroke:"none",fill:"#fff",opacity:0});(function(s,u,t,q,j){var r=u.piece;var i=u.index;u.mouseover=function(v){u.event=v;clearTimeout(j.timer);q.onMouseOverArea(s,r,i,u);if(j.chartEnv&&j.chartEnv.id!=s.id){j.caller.onMouseExitArea(j.chartEnv,j.mouseObj.piece,j.mouseObj.index,j.mouseObj);q.onMouseEnterArea(s,r,i,u)}else{if(j.inArea!=t){if(j.inArea<0){q.onMouseEnterArea(s,r,i,u)}else{q.onMouseChangedArea(s,r,i,u)}}}j.chartEnv=s;j.mouseObj=u;j.caller=q;j.inArea=t};u.mouseout=function(v){u.event=v;clearTimeout(j.timer);q.onMouseOutArea(s,r,i,u);j.timer=setTimeout(function(){j.timer=false;q.onMouseExitArea(s,r,i,u);j.chartEnv=false;j.inArea=-1},s.opt.features.mousearea.areaMoveDelay)};c(u.area.node).mouseover(u.mouseover);c(u.area.node).mouseout(u.mouseout)})(m,m.mouseAreas[k],k,this,o)}},onMouseOverArea:function(g,f,e,d){a.onMouseOver(g,d.piece?d.piece.serie:false,d.index,d)},onMouseOutArea:function(g,f,e,d){a.onMouseOut(g,d.piece?d.piece.serie:false,d.index,d)},onMouseEnterArea:function(g,f,e,d){a.onMouseEnter(g,d.piece?d.piece.serie:false,d.index,d)},onMouseChangedArea:function(g,f,e,d){a.onMouseChanged(g,d.piece?d.piece.serie:false,d.index,d)},onMouseExitArea:function(g,f,e,d){a.onMouseExit(g,d.piece?d.piece.serie:false,d.index,d)}};c.elycharts.featuresmanager.register(c.elycharts.mousemanager,0)})(jQuery);(function(a){a.elycharts.shadowmanager={beforeShow:function(e,g){if(!e.opt.features.shadows||!e.opt.features.shadows.active){return}var b=e.opt.features.shadows.offset;var f=[];for(var d=0;d<g.length;d++){var h=[];for(var c=0;c<g[d].path.length;c++){var k=g[d].path[c];switch(k[0]){case"M":case"L":h.push([k[0],k[1]+b[0],k[2]+b[1]]);break;case"A":case"C":h.push([k[0],k[1],k[2],k[3],k[4],k[5],k[6]+b[0],k[7]+b[1]]);break;case"z":case"Z":h.push([k[0]]);break}}f.push({path:h,attr:e.opt.features.shadows.props})}for(var d=f.length-1;d>=0;d--){g.unshift(f[d])}}};a.elycharts.featuresmanager.register(a.elycharts.shadowmanager,5)})(jQuery);(function(b){var a=b.elycharts.common;b.elycharts.tooltipmanager={afterShow:function(c,d){if(c.tooltipContainer){c.tooltipFrame.remove();c.tooltipFrame=null;c.tooltipFrameElement=null;c.tooltipContent.remove();c.tooltipContent=null;c.tooltipContainer.remove();c.tooltipContainer=null}if(!b.elycharts.tooltipid){b.elycharts.tooltipid=0}b.elycharts.tooltipid++;c.tooltipContainer=b('<div id="elycharts_tooltip_'+b.elycharts.tooltipid+'" style="position: absolute; top: 100; left: 100; z-index: 10; overflow: hidden; white-space: nowrap; display: none"><div id="elycharts_tooltip_'+b.elycharts.tooltipid+'_frame" style="position: absolute; top: 0; left: 0; z-index: -1"></div><div id="elycharts_tooltip_'+b.elycharts.tooltipid+'_content" style="cursor: default"></div></div>').appendTo(document.body);c.tooltipFrame=a._RaphaelInstance("elycharts_tooltip_"+b.elycharts.tooltipid+"_frame",500,500);c.tooltipContent=b("#elycharts_tooltip_"+b.elycharts.tooltipid+"_content")},_prepareShow:function(e,d,c,f){if(e.tooltipFrameElement){e.tooltipFrameElement.attr(d.frameProps)}if(d.padding){e.tooltipContent.css({padding:d.padding[0]+"px "+d.padding[1]+"px"})}e.tooltipContent.css(d.contentStyle);e.tooltipContent.html(f);var g=b(e.container).offset();if(e.opt.features.tooltip.fixedPos){g.top+=e.opt.features.tooltip.fixedPos[1];g.left+=e.opt.features.tooltip.fixedPos[0]}else{var h=this.getXY(e,d,c);if(!h[2]){g.left+=h[0];while(g.top+h[1]<0){h[1]+=20}g.top+=h[1]}else{g.left=h[0];g.top=h[1]}}return{top:g.top,left:g.left}},getXY:function(e,i,c){var l=0,k=0;if(c.path[0][0]=="RECT"){l=a.getX(c.path[0]);k=a.getY(c.path[0])-i.height-20}else{if(c.path[0][0]=="CIRCLE"){l=a.getX(c.path[0]);k=a.getY(c.path[0])-i.height-20}else{if(c.path[0][0]=="SLICE"){var o=c.path[0];var m=i.width&&i.width!="auto"?i.width:100;var d=i.height&&i.height!="auto"?i.height:100;var f=Math.sqrt(Math.pow(m,2)+Math.pow(d,2))/2;if(f>e.opt.r){f=e.opt.r}var n=o[5]+(o[6]-o[5])/2+180;var g=Math.PI/180;l=o[1]+f*Math.cos(-n*g)-m/2;k=o[2]+f*Math.sin(-n*g)-d/2}else{if(c.piece&&c.piece.paths&&c.index>=0&&c.piece.paths[c.index]&&c.piece.paths[c.index].rect){var j=c.piece.paths[c.index].rect;l=j[0];k=j[1]-i.height-20}}}}if(e.opt.features.tooltip.positionHandler){return e.opt.features.tooltip.positionHandler(e,i,c,l,k)}else{return[l,k]}},onMouseEnter:function(f,g,d,c){var e=c.props.tooltip;if(f.emptySeries&&f.opt.series.empty){e=b.extend(true,e,f.opt.series.empty.tooltip)}if(!e||!e.active){return false}if(!f.opt.tooltips||(g&&(!f.opt.tooltips[g]||!f.opt.tooltips[g][d]))||(!g&&!f.opt.tooltips[d])){return this.onMouseExit(f,g,d,c)}var h=g?f.opt.tooltips[g][d]:f.opt.tooltips[d];if(e.width&&e.width!="auto"&&e.height&&e.height!="auto"){var i=e.frameProps&&e.frameProps["stroke-width"]?e.frameProps["stroke-width"]:0;f.tooltipContainer.width(e.width+i+1).height(e.height+i+1);if(!f.tooltipFrameElement&&e.frameProps){f.tooltipFrameElement=f.tooltipFrame.rect(i/2,i/2,e.width,e.height,e.roundedCorners)}}f.tooltipContainer.css(this._prepareShow(f,e,c,h)).fadeIn(f.opt.features.tooltip.fadeDelay);return true},onMouseChanged:function(f,g,d,c){var e=c.props.tooltip;if(f.emptySeries&&f.opt.series.empty){e=b.extend(true,e,f.opt.series.empty.tooltip)}if(!e||!e.active){return false}if(!f.opt.tooltips||(g&&(!f.opt.tooltips[g]||!f.opt.tooltips[g][d]))||(!g&&!f.opt.tooltips[d])){return this.onMouseExit(f,g,d,c)}var h=g?f.opt.tooltips[g][d]:f.opt.tooltips[d];f.tooltipContainer.clearQueue();f.tooltipContainer.animate(this._prepareShow(f,e,c,h),f.opt.features.tooltip.moveDelay,"linear");return true},onMouseExit:function(f,g,d,c){var e=c.props.tooltip;if(f.emptySeries&&f.opt.series.empty){e=b.extend(true,e,f.opt.series.empty.tooltip)}if(!e||!e.active){return false}f.tooltipContainer.fadeOut(f.opt.features.tooltip.fadeDelay);return true}};b.elycharts.featuresmanager.register(b.elycharts.tooltipmanager,20)})(jQuery);(function(c){var a=c.elycharts.featuresmanager;var b=c.elycharts.common;c.elycharts.barline={init:function(d){},draw:function(i){var f=i.paper;var e=i.opt;i.xmin=e.margins[3];i.xmax=e.width-e.margins[1];i.ymin=e.margins[0];i.ymax=e.height-e.margins[2];var l=0;for(var h in e.values){var n=e.values[h];var m=n[0];var j={props:b.areaProps(i,"Series",h)};i.plots[h]=j;if(!j.props.stacked||!i.plots[j.props.stacked]){j.from=0}else{j.from=i.plots[j.props.stacked].to}j.to=j.from+m;if(j.to>l){l=j.to}}if(typeof e.max!="undefined"){l=e.max}if(!l){l=1}var g=[];for(h in e.values){j=i.plots[h];var k=(i.xmax-i.xmin)/l;if(e.direction!="rtl"){g.push({paths:[{path:[["RECT",i.xmin+k*j.from,i.ymin,i.xmin+k*j.to,i.ymax]],attr:j.props.plotProps}],section:"Series",serie:h,subSection:"Plot",mousearea:"paths"})}else{g.push({paths:[{path:[["RECT",i.xmax-k*j.from,i.ymin,i.xmax-k*j.to,i.ymax]],attr:j.props.plotProps}],section:"Series",serie:h,subSection:"Plot",mousearea:"paths"})}}a.beforeShow(i,g);b.show(i,g);a.afterShow(i,g);return g}}})(jQuery);(function(c){var a=c.elycharts.featuresmanager;var b=c.elycharts.common;c.elycharts.funnel={init:function(d){},draw:function(f){var j=f.paper;var e=f.opt;f.xmin=e.margins[3];f.xmax=e.width-e.margins[1];f.ymin=e.margins[0]+Math.abs(e.rh);for(var h in e.values){var d=e.values[h];var i=e.method=="width"?d[d.length-1]/(d[0]?d[0]:1):Math.sqrt(d[d.length-1]/(d[0]?d[0]:1)*Math.pow(1/2,2))*2;f.ymax=e.height-e.margins[2]-i*Math.abs(e.rh);var g=this.pieces(f,h,0,1,1,d)}a.beforeShow(f,g);b.show(f,g);a.afterShow(f,g);return g},pieces:function(o,n,d,g,f,t){var x,j=[],e=o.opt;var s=t[0]?t[0]:1;var m=d;var k=(g-d-e.topSector-e.bottomSector)/(t.length>1?t.length-1:1);var q=f;if((x=this.edge(o,m,q,true))){j.push({path:x,section:"Edge",attr:o.opt.edgeProps})}if(e.topSector>0&&(x=this.section(o,m,m=m+e.topSector,q,q))){j.push({path:x.path,center:x.center,rect:x.rect,section:"Sector",serie:"top",attr:o.opt.topSectorProps})}var u=[];for(var l=1;l<t.length;l++){var r=t[0]?t[l]:1;if((x=this.section(o,m,m=m+k,q,e.method=="width"?q=r/s*f:q=Math.sqrt(r/s*Math.pow(f/2,2))*2))){var p=b.areaProps(o,"Series",n,l-1)}u.push({path:x.path,center:x.center,rect:x.rect,attr:p.plotProps})}j.push({section:"Series",serie:n,paths:u,subSection:"Plot",mousearea:"paths"});if(e.bottomSector>0&&(x=this.section(o,m,m=m+e.bottomSector,q,q))){j.push({path:x.path,center:x.center,rect:x.rect,section:"Sector",serie:"bottom",attr:o.opt.bottomSectorProps})}if((x=this.edge(o,m,q,false))){j.push({path:x,section:"Edge",attr:o.opt.edgeProps})}return j},section:function(k,m,i,j,l){x1a=k.xmin+(k.xmax-k.xmin)*(j/-2+1/2);x2a=k.xmin+(k.xmax-k.xmin)*(j/2+1/2);x1b=k.xmin+(k.xmax-k.xmin)*(l/-2+1/2);x2b=k.xmin+(k.xmax-k.xmin)*(l/2+1/2);y1=k.ymin+(k.ymax-k.ymin)*m;y2=k.ymin+(k.ymax-k.ymin)*i;var f=(x2a-x1a)/2;var h=f/(k.xmax-k.xmin)*2*Math.abs(k.opt.rh);var e=(x2b-x1b)/2;var g=e/(k.xmax-k.xmin)*2*Math.abs(k.opt.rh);var d=[];d.push(["M",x1a,y1]);if(k.opt.rh!=0){d.push(["A",f,h,0,0,k.opt.rh>0?1:0,x2a,y1])}else{d.push(["L",x2a,y1])}d.push(["L",x2b,y2]);if(k.opt.rh!=0){d.push(["A",e,g,0,0,k.opt.rh>0?0:1,x1b,y2])}else{d.push(["L",x1b,y2])}d.push(["z"]);return{path:d,center:[(x2a+x1a)/2,(y2+y1)/2+(k.opt.rh>0?-1:+1)*(h+g)/2],rect:[x1a,y1,x2a,y2]}},edge:function(j,i,d,g){if((g&&j.opt.rh>=0)||(!g&&j.opt.rh<=0)){return false}x1=j.xmin+(j.xmax-j.xmin)*(d/-2+1/2);x2=j.xmin+(j.xmax-j.xmin)*(d/2+1/2);y=j.ymin+(j.ymax-j.ymin)*i;var k=(x2-x1)/2;var f=k/(j.xmax-j.xmin)*2*Math.abs(j.opt.rh);var e=[];e.push(["M",x1,y]);e.push(["A",k,f,0,0,j.opt.rh<0?1:0,x2,y]);e.push(["A",k,f,0,0,j.opt.rh<0?1:0,x1,y]);e.push(["z"]);return e}}})(jQuery);(function(c){var a=c.elycharts.featuresmanager;var b=c.elycharts.common;c.elycharts.line={init:function(d){},draw:function(o){if(b.executeIfChanged(o,["values","series"])){o.plots={};o.axis={x:{}};o.barno=0;o.indexCenter="line"}var A=o.opt;var O=o.plots;var B=o.axis;var g=o.paper;var Y=o.opt.values;var r=o.opt.labels;var T,p,F,C,f,n;if(b.executeIfChanged(o,["values","series"])){var W=0;var P=false;for(C in Y){f={index:W,type:false,visible:false};O[C]=f;if(Y[C]){F=b.areaProps(o,"Series",C);f.type=F.type;if(F.type=="bar"){o.indexCenter="bar"}if(F.visible){f.visible=true;if(!n||n<Y[C].length){n=Y[C].length}var J=[];for(T=0;T<Y[C].length;T++){var G=Y[C][T];if(G==null){if(F.type=="bar"){G=0}else{for(var S=T+1;S<Y[C].length&&Y[C][S]==null;S++){}var l=S<Y[C].length?Y[C][S]:null;for(var R=T-1;R>=0&&Y[C][R]==null;R--){}var I=R>=0?Y[C][R]:null;G=l!=null?(I!=null?(l*(T-R)+I*(S-T))/(S-R):l):I}}J.push(G)}if(F.stacked&&!(typeof F.stacked=="string")){F.stacked=P}if(typeof F.stacked=="undefined"||F.stacked==C||F.stacked<0||!O[F.stacked]||!O[F.stacked].visible||O[F.stacked].type!=f.type){f.ref=C;if(F.type=="bar"){f.barno=o.barno++}f.from=[];if(!F.cumulative){f.to=J}else{f.to=[];p=0;for(T=0;T<J.length;T++){f.to.push(p+=J[T])}}for(T=0;T<J.length;T++){f.from.push(0)}}else{f.ref=F.stacked;if(F.type=="bar"){f.barno=O[F.stacked].barno}f.from=O[F.stacked].stack;f.to=[];p=0;if(!F.cumulative){for(T=0;T<J.length;T++){f.to.push(f.from[T]+J[T])}}else{for(T=0;T<J.length;T++){f.to.push(f.from[T]+(p+=J[T]))}}O[F.stacked].stack=f.to}f.stack=f.to;f.max=Math.max.apply(Math,f.from.concat(f.to));f.min=Math.min.apply(Math,f.from.concat(f.to));if(F.axis){if(!B[F.axis]){B[F.axis]={plots:[]}}B[F.axis].plots.push(C);if(typeof B[F.axis].max=="undefined"){B[F.axis].max=f.max}else{B[F.axis].max=Math.max(B[F.axis].max,f.max)}if(typeof B[F.axis].min=="undefined"){B[F.axis].min=f.min}else{B[F.axis].min=Math.min(B[F.axis].min,f.min)}}P=C}}}}if(!r){r=[]}while(n>r.length){r.push(null)}n=r.length;o.opt.labels=r;if(b.executeIfChanged(o,["values","series","axis"])){for(var t in B){F=b.areaProps(o,"Axis",t);B[t].props=F;if(typeof F.max!="undefined"){B[t].max=F.max}if(typeof F.min!="undefined"){B[t].min=F.min}if(B[t].min==B[t].max){B[t].max=B[t].min+1}if(F.normalize&&F.normalize>0){var N=Math.abs(B[t].max);if(B[t].min&&Math.abs(B[t].min)>N){N=Math.abs(B[t].min)}if(N){var D=Math.floor(Math.log(N)/Math.LN10)-(F.normalize-1);D=D>=0?Math.pow(10,D):1/Math.pow(10,-D);N=Math.ceil(N/D/(A.features.grid.ny?A.features.grid.ny:1))*D*(A.features.grid.ny?A.features.grid.ny:1);N=Math.round(N/D)*D;B[t].normalizationBase=D;if(B[t].max){B[t].max=Math.ceil(B[t].max/N)*N}if(B[t].min){B[t].min=Math.floor(B[t].min/N)*N}}}if(B[t].plots){for(var K in B[t].plots){O[B[t].plots[K]].max=B[t].max;O[B[t].plots[K]].min=B[t].min}}}}var U=[];this.grid(o,U);var u=(A.width-A.margins[3]-A.margins[1])/(r.length>1?r.length-1:1);var Q=(A.width-A.margins[3]-A.margins[1])/(r.length>0?r.length:1);for(C in Y){F=b.areaProps(o,"Series",C);f=O[C];if(F.lineCenter&&F.lineCenter=="auto"){F.lineCenter=(o.indexCenter=="bar")}else{if(F.lineCenter&&o.indexCenter=="line"){o.indexCenter="bar"}}if(Y[C]&&F.visible){var s=(A.height-A.margins[2]-A.margins[0])/(f.max-f.min);if(F.type=="line"){var E=["LINE",[],F.rounded];var h=["LINEAREA",[],[],F.rounded];var X=[];for(T=0,K=r.length;T<K;T++){if(f.to.length>T){var Z=b.areaProps(o,"Series",C,T);var V=f.to[T]>f.max?f.max:(f.to[T]<f.min?f.min:f.to[T]);var M=Math.round((F.lineCenter?Q/2:0)+A.margins[3]+T*(F.lineCenter?Q:u));var L=Math.round(A.height-A.margins[2]-s*(V-f.min));var w=f.from[T]>f.max?f.max:(f.from[T]<f.min?f.min:f.from[T]);var q=Math.round(A.height-A.margins[2]-s*(w-f.min))+(c.browser.msie?1:0);E[1].push([M,L]);if(F.fill){h[1].push([M,L]);h[2].push([M,q])}if(Z.dot){if(Y[C][T]==null&&!Z.dotShowOnNull){X.push({path:false,attr:false})}else{X.push({path:[["CIRCLE",M,L,Z.dotProps.size]],attr:Z.dotProps})}}}}if(F.fill){U.push({section:"Series",serie:C,subSection:"Fill",path:[h],attr:F.fillProps})}else{U.push({section:"Series",serie:C,subSection:"Fill",path:false,attr:false})}U.push({section:"Series",serie:C,subSection:"Plot",path:[E],attr:F.plotProps,mousearea:"pathsteps"});if(X.length){U.push({section:"Series",serie:C,subSection:"Dot",paths:X})}else{U.push({section:"Series",serie:C,subSection:"Dot",path:false,attr:false})}}else{pieceBar=[];for(T=0,K=r.length;T<K;T++){if(f.to.length>T){if(f.from[T]!=f.to[T]){var m=Math.floor((Q-A.barMargins)/o.barno);var H=m*(100-F.barWidthPerc)/200;var e=A.barMargins/2+f.barno*m;var z=Math.floor(A.margins[3]+T*Q+e+H);var ab=Math.round(A.height-A.margins[2]-s*(f.to[T]-f.min));var aa=Math.round(A.height-A.margins[2]-s*(f.from[T]-f.min));pieceBar.push({path:[["RECT",z,ab,z+m-H*2,aa]],attr:F.plotProps})}else{pieceBar.push({path:false,attr:false})}}}if(pieceBar.length){U.push({section:"Series",serie:C,subSection:"Plot",paths:pieceBar,mousearea:"paths"})}else{U.push({section:"Series",serie:C,subSection:"Plot",path:false,attr:false,mousearea:"paths"})}}}else{if(F.type=="line"){U.push({section:"Series",serie:C,subSection:"Fill",path:false,attr:false})}U.push({section:"Series",serie:C,subSection:"Plot",path:false,attr:false,mousearea:"paths"});if(F.type=="line"){U.push({section:"Series",serie:C,subSection:"Dot",path:false,attr:false})}}}a.beforeShow(o,U);b.show(o,U);a.afterShow(o,U);return U},grid:function(h,S){if(b.executeIfChanged(h,["values","series","axis","labels","margins","width","height","features.grid"])){var w=h.opt;var C=h.opt.features.grid;var d=h.paper;var z=h.axis;var o=h.opt.labels;var r=(w.width-w.margins[3]-w.margins[1])/(o.length>1?o.length-1:1);var O=(w.width-w.margins[3]-w.margins[1])/(o.length>0?o.length:1);var R,Q,J,I,B,P,N,f,D,m;var E=[];var k=C.labelsCenter;if(k=="auto"){k=(h.indexCenter=="bar")}if(z.x&&z.x.props.labels){for(R=0;R<o.length;R++){if(o[R]){if(z.x.props.labelsSkip&&R<z.x.props.labelsSkip){o[R]=false}else{if(typeof o[R]!="boolean"||o[R]){D=o[R];if(z.x.props.labelsFormatHandler){D=z.x.props.labelsFormatHandler(D)}m=(z.x.props.prefix?z.x.props.prefix:"")+o[R]+(z.x.props.suffix?z.x.props.suffix:"");P=(k&&z.x.props.labelsAnchor!="start"?Math.round(O/2):0)+w.margins[3]+R*(k?O:r)+(z.x.props.labelsMargin?z.x.props.labelsMargin:0);N=w.height-w.margins[2]+z.x.props.labelsDistance;f=d.text(P,N,m).attr(z.x.props.labelsProps).toBack();if(z.x.props.labelsRotate){f.attr({"text-anchor":z.x.props.labelsRotate>0?"start":"end"}).rotate(z.x.props.labelsRotate,P,N).toBack()}else{if(C.nx=="auto"&&P+f.getBBox().width/(z.x.props.labelsAnchor&&z.x.props.labelsAnchor=="start"?1:2)>w.width){f.hide();o[R]=false}else{if(C.nx=="auto"&&(!z.x.props.labelsAnchor||z.x.props.labelsAnchor!="start")&&P-f.getBBox().width/2<0){f.hide();o[R]=false}else{if(z.x.props.labelsAnchor&&z.x.props.labelsAnchor=="start"){f.attr({"text-anchor":"start"});B=f.getBBox().width+(z.x.props.labelsMargin?z.x.props.labelsMargin:0)+(z.x.props.labelsMarginRight?z.x.props.labelsMarginRight:0)-(k?O:r);if(z.x.props.labelsHideCovered&&B>0){Q=R+Math.ceil(B/(k?O:r));for(;R<Q&&R+1<o.length;R++){o[R+1]=false}}}else{if(z.x.props.labelsHideCovered){B=(f.getBBox().width+(z.x.props.labelsMargin?z.x.props.labelsMargin:0)+(z.x.props.labelsMarginRight?z.x.props.labelsMarginRight:0))/1-(k?O:r);if(B>0){Q=R+Math.ceil(B/(k?O:r));for(;R<Q&&R+1<o.length;R++){o[R+1]=false}}}}}}}E.push({path:[["RELEMENT",f]],attr:false})}}}}}S.push({section:"Axis",serie:"x",subSection:"Label",paths:E});if(z.x&&z.x.props.title){J=w.margins[3]+Math.floor((w.width-w.margins[1]-w.margins[3])/2);I=w.height-w.margins[2]+z.x.props.titleDistance*(c.browser.msie?z.x.props.titleDistanceIE:1);S.push({section:"Axis",serie:"x",subSection:"Title",path:[["TEXT",z.x.props.title,J,I]],attr:z.x.props.titleProps})}else{S.push({section:"Axis",serie:"x",subSection:"Title",path:false,attr:false})}for(var s in ["l","r"]){Q=["l","r"][s];if(z[Q]&&z[Q].props.labels&&C.ny){E=[];for(R=z[Q].props.labelsSkip?z[Q].props.labelsSkip:0;R<=C.ny;R++){var p=(w.height-w.margins[2]-w.margins[0])/C.ny;if(Q=="r"){P=w.width-w.margins[1]+z[Q].props.labelsDistance;if(!z[Q].props.labelsProps["text-anchor"]){z[Q].props.labelsProps["text-anchor"]="start"}}else{P=w.margins[3]-z[Q].props.labelsDistance;if(!z[Q].props.labelsProps["text-anchor"]){z[Q].props.labelsProps["text-anchor"]="end"}}if(z[Q].props.labelsAnchor){z[Q].props.labelsProps["text-anchor"]=z[Q].props.labelsAnchor}D=(z[Q].min+(R*((z[Q].max-z[Q].min)/C.ny)));if(z[Q].normalizationBase){D=Math.round(D/z[Q].normalizationBase)/(1/z[Q].normalizationBase)}if(z[Q].props.labelsFormatHandler){D=z[Q].props.labelsFormatHandler(D)}if(z[Q].props.labelsCompactUnits){D=b.compactUnits(D,z[Q].props.labelsCompactUnits)}m=(z[Q].props.prefix?z[Q].props.prefix:"")+D+(z[Q].props.suffix?z[Q].props.suffix:"");N=w.height-w.margins[2]-R*p;E.push({path:[["TEXT",m,P,N+(z[Q].props.labelsMargin?z[Q].props.labelsMargin:0)]],attr:z[Q].props.labelsProps})}S.push({section:"Axis",serie:Q,subSection:"Label",paths:E})}else{S.push({section:"Axis",serie:Q,subSection:"Label",paths:[]})}if(z[Q]&&z[Q].props.title){if(Q=="r"){J=w.width-w.margins[1]+z[Q].props.titleDistance*(c.browser.msie?z[Q].props.titleDistanceIE:1)}else{J=w.margins[3]-z[Q].props.titleDistance*(c.browser.msie?z[Q].props.titleDistanceIE:1)}var v=b._clone(z[Q].props.titleProps);v.rotation=Q=="l"?270:90;S.push({section:"Axis",serie:Q,subSection:"Title",path:[["TEXT",z[Q].props.title,J,w.margins[0]+Math.floor((w.height-w.margins[0]-w.margins[2])/2)]],attr:v})}else{S.push({section:"Axis",serie:Q,subSection:"Title",path:false,attr:false})}}if(C.nx||C.ny){var K=[],u=[],l=[],M=C.nx=="auto"?(k?o.length:o.length-1):C.nx,L=C.ny,g=(w.height-w.margins[2]-w.margins[0])/(L?L:1),n=(w.width-w.margins[1]-w.margins[3])/(M?M:1),H=typeof C.forceBorder=="object"?C.forceBorder[3]:C.forceBorder,G=typeof C.forceBorder=="object"?C.forceBorder[1]:C.forceBorder,t=typeof C.forceBorder=="object"?C.forceBorder[0]:C.forceBorder,q=typeof C.forceBorder=="object"?C.forceBorder[2]:C.forceBorder,F=L>0?(typeof C.draw=="object"?C.draw[0]:C.draw):false,A=M>0?typeof C.draw=="object"?C.draw[1]:C.draw:false;if(L>0){for(R=0;R<L+1;R++){if(t&&R==0||q&&R==L||F&&R>0&&R<L){K.push(["M",w.margins[3]-C.extra[3],w.margins[0]+Math.round(R*g)]);K.push(["L",w.width-w.margins[1]+C.extra[1],w.margins[0]+Math.round(R*g)])}if(R<L){if(R%2==0&&C.evenHProps||R%2==1&&C.oddHProps){u.push({path:[["RECT",w.margins[3]-C.extra[3],w.margins[0]+Math.round(R*g),w.width-w.margins[1]+C.extra[1],w.margins[0]+Math.round((R+1)*g)]],attr:R%2==0?C.evenHProps:C.oddHProps})}else{u.push({path:false,attr:false})}}}}for(R=0;R<M+1;R++){if(H&&R==0||G&&R==M||A&&((C.nx!="auto"&&R>0&&R<L)||(C.nx=="auto"&&(typeof o[R]!="boolean"||o[R])))){K.push(["M",w.margins[3]+Math.round(R*n),w.margins[0]-C.extra[0]]);K.push(["L",w.margins[3]+Math.round(R*n),w.height-w.margins[2]+C.extra[2]])}if(R<M){if(R%2==0&&C.evenVProps||R%2==1&&C.oddVProps){l.push({path:[["RECT",w.margins[3]+Math.round(R*n),w.margins[0]-C.extra[0],w.margins[3]+Math.round((R+1)*n),w.height-w.margins[2]+C.extra[2],]],attr:R%2==0?C.evenVProps:C.oddVProps})}else{l.push({path:false,attr:false})}}}S.push({section:"Grid",path:K.length?K:false,attr:K.length?C.props:false});S.push({section:"GridBandH",paths:u});S.push({section:"GridBandV",paths:l});var e=[];if(C.ticks.active&&(typeof C.ticks.active!="object"||C.ticks.active[0])){for(R=0;R<M+1;R++){if(C.nx!="auto"||typeof o[R]!="boolean"||o[R]){e.push(["M",w.margins[3]+Math.round(R*n),w.height-w.margins[2]-C.ticks.size[1]]);e.push(["L",w.margins[3]+Math.round(R*n),w.height-w.margins[2]+C.ticks.size[0]])}}}if(C.ticks.active&&(typeof C.ticks.active!="object"||C.ticks.active[1])){for(R=0;R<L+1;R++){e.push(["M",w.margins[3]-C.ticks.size[0],w.margins[0]+Math.round(R*g)]);e.push(["L",w.margins[3]+C.ticks.size[1],w.margins[0]+Math.round(R*g)])}}if(C.ticks.active&&(typeof C.ticks.active!="object"||C.ticks.active[2])){for(R=0;R<L+1;R++){e.push(["M",w.width-w.margins[1]-C.ticks.size[1],w.margins[0]+Math.round(R*g)]);e.push(["L",w.width-w.margins[1]+C.ticks.size[0],w.margins[0]+Math.round(R*g)])}}S.push({section:"Ticks",path:e.length?e:false,attr:e.length?C.ticks.props:false})}}}}})(jQuery);(function(c){var a=c.elycharts.featuresmanager;var b=c.elycharts.common;c.elycharts.pie={init:function(d){},draw:function(D){var e=D.opt;var o=D.opt.width;var B=D.opt.height;var q=D.opt.r?D.opt.r:Math.floor((o<B?o:B)/2.5);var g=D.opt.cx?D.opt.cx:Math.floor(o/2);var f=D.opt.cy?D.opt.cx:Math.floor(B/2);var z=0,A,p,t,x,j;for(t in e.values){x={visible:false,total:0,values:[]};D.plots[t]=x;var d=b.areaProps(D,"Series",t);if(d.visible){x.visible=true;z++;x.values=e.values[t];for(A=0,p=x.values.length;A<p;A++){if(x.values[A]>0){j=b.areaProps(D,"Series",t,A);if(typeof j.inside=="undefined"||j.inside<0){x.total+=x.values[A]}}}for(A=0;A<p;A++){if(x.values[A]<x.total*e.valueThresold){x.total=x.total-x.values[A];x.values[A]=0}}}}var s=q/z;var m=-s,k=0;var n=[];for(t in e.values){x=D.plots[t];var v=[];if(x.visible){m+=s;k+=s;var E=D.opt.startAngle,C=0,l=0;if(x.total==0){D.emptySeries=true;j=b.areaProps(D,"Series","empty");v.push({path:[["CIRCLE",g,f,q]],attr:j.plotProps})}else{D.emptySeries=false;for(A=0,p=x.values.length;A<p;A++){var u=x.values[A];if(u>0){j=b.areaProps(D,"Series",t,A);if(typeof j.inside=="undefined"||j.inside<0){E+=l;C=360*u/x.total;l=C}else{C=360*values[j.inside]/x.total*u/values[j.inside]}if(j.r){if(j.r>0){if(j.r<=1){k=m+s*j.r}else{k=m+j.r}}else{if(j.r>=-1){m=m+s*(-j.r)}else{m=m-j.r}}}if(!D.opt.clockwise){v.push({path:[["SLICE",g,f,k,m,E,E+C]],attr:j.plotProps})}else{v.push({path:[["SLICE",g,f,k,m,-E-C,-E]],attr:j.plotProps})}}else{v.push({path:false,attr:false})}}}}else{if(e.values[t]&&e.values[t].length){for(A=0,p=e.values[t].length;A<p;A++){v.push({path:false,attr:false})}}}n.push({section:"Series",serie:t,subSection:"Plot",paths:v,mousearea:"paths"})}a.beforeShow(D,n);b.show(D,n);a.afterShow(D,n);return n}}})(jQuery);