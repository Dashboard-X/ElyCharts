/**********************************************************************
 * ELYCHARTS v2.1.1
 **********************************************************************/
(function(a){if(!a.elycharts){a.elycharts={}}a.elycharts.templates={common:{margins:[10,10,10,10],interactive:true,defaultSeries:{visible:true,tooltip:{active:true,width:100,height:50,roundedCorners:5,padding:[6,6],frameProps:{fill:"white","stroke-width":2},contentStyle:{"font-family":"Arial","font-size":"12px","line-height":"16px",color:"black"}},highlight:{scaleSpeed:100,scaleEasing:"",moveSpeed:100,moveEasing:"",restoreSpeed:0,restoreEasing:""},anchor:{},startAnimation:{type:"simple",speed:600,delay:0,propsFrom:{},propsTo:{},easing:""},label:{active:false,html:false,props:{fill:"black",stroke:"none","font-family":"Arial","font-size":"16px"},style:{cursor:"default"}}},series:{empty:{label:{active:false}}},features:{tooltip:{fadeDelay:100,moveDelay:300},mousearea:{type:"single",indexCenter:"auto",areaMoveDelay:500,syncTag:false},highlight:{indexHighlightProps:{opacity:1}},animation:{startAnimation:{speed:600,delay:0,easing:""},stepAnimation:{speed:600,delay:0,easing:""}},frameAnimation:{active:false,cssFrom:{opacity:0},cssTo:{opacity:1},speed:"slow",easing:"linear"},pixelWorkAround:{active:true},label:{},shadows:{active:false,offset:[2,2],props:{"stroke-width":0,"stroke-opacity":0,fill:"black","fill-opacity":0.3}},balloons:{active:false,style:{},padding:[5,5],left:10,line:[[0,0],[0,0]],lineProps:{}},legend:{horizontal:false,x:"auto",y:10,width:"auto",height:20,itemWidth:"fixed",margins:[0,0,0,0],dotMargins:[10,5],borderProps:{fill:"white",stroke:"black","stroke-width":1},dotType:"rect",dotWidth:10,dotHeight:10,dotR:5,dotProps:{type:"rect",width:10,height:10},textProps:{font:"12px Arial",fill:"#000"}},debug:{active:false}},nop:0},line:{template:"common",barMargins:0,defaultAxis:{normalize:2,min:0,labels:true,labelsDistance:8,labelsRotate:0,labelsProps:{font:"10px Arial",fill:"#000"},titleDistance:25,titleDistanceIE:0.75,titleProps:{font:"12px Arial",fill:"#000","font-weight":"bold"}},axis:{x:{titleDistanceIE:1.2}},defaultSeries:{type:"line",axis:"l",cumulative:false,rounded:1,lineCenter:"auto",plotProps:{"stroke-width":1,"stroke-linejoin":"round"},barWidthPerc:100,fill:false,fillProps:{stroke:"none","stroke-width":0,"stroke-opacity":0,opacity:0.3},dot:true,dotProps:{size:4,stroke:"#000"},startAnimation:{plotPropsFrom:false,fillPropsFrom:false,dotPropsFrom:false,shadowPropsFrom:false}},features:{grid:{nx:"auto",ny:10,draw:true,forceBorder:true,props:{stroke:"#e0e0e0","stroke-width":1},extra:[0,0,0,0],labelsCenter:"auto",ticks:{active:[false,false,false],size:[10,10],props:{stroke:"#e0e0e0","stroke-width":1}}}},nop:0},pie:{template:"common",startAngle:0,clockwise:false,valueThresold:0.006,defaultSeries:{}},funnel:{template:"common",rh:0,method:"width",topSector:0,topSectorProps:{fill:"#d0d0d0"},bottomSector:0.1,bottomSectorProps:{fill:"#d0d0d0"},edgeProps:{fill:"#c0c0c0","stroke-width":1,opacity:1},nop:0},barline:{template:"common",direction:"ltr"}}})(jQuery);(function(d){if(!d.elycharts){d.elycharts={}}d.elycharts.lastId=0;d.fn.chart=function(f){if(!this.length){return this}var g=this.data("elycharts_env");if(!g){if(!f||!f.type||!d.elycharts.templates[f.type]){alert("ElyCharts ERROR: chart type is not specified");return false}g=e(this,f);g.pieces=d.elycharts[g.opt.type].draw(g);this.data("elycharts_env",g)}else{f=c(f);g.oldopt=b._clone(g.opt);g.opt=d.extend(true,g.opt,f);g.newopt=f;g.pieces=d.elycharts[g.opt.type].draw(g)}return this};function e(j,f){var g;if(d.elysia_charts){if(d.elysia_charts.default_options){for(g in d.elysia_charts.default_options){d.elycharts.templates[g]=d.elysia_charts.default_options[g]}}if(d.elysia_charts.templates){for(g in d.elysia_charts.templates){d.elycharts.templates[g]=d.elysia_charts.templates[g]}}}if(!f.template){f.template=f.type}while(f.template){var i=f.template;delete f.template;f=d.extend(true,{},d.elycharts.templates[i],f)}f=c(f);if(!f.width){f.width=j.width()}if(!f.height){f.height=j.height()}var h={id:d.elycharts.lastId++,paper:b._RaphaelInstance(j.get()[0],f.width,f.height),container:j,plots:[],opt:f};h.paper.rect(0,0,1,1).attr({opacity:0});d.elycharts[f.type].init(h);return h}function c(f){if(f.type=="pie"||f.type=="funnel"){if(f.values&&d.isArray(f.values)&&!d.isArray(f.values[0])){f.values={root:f.values}}if(f.tooltips&&d.isArray(f.tooltips)&&!d.isArray(f.tooltips[0])){f.tooltips={root:f.tooltips}}if(f.anchors&&d.isArray(f.anchors)&&!d.isArray(f.anchors[0])){f.anchors={root:f.anchors}}if(f.balloons&&d.isArray(f.balloons)&&!d.isArray(f.balloons[0])){f.balloons={root:f.balloons}}if(f.legend&&d.isArray(f.legend)&&!d.isArray(f.legend[0])){f.legend={root:f.legend}}}if(f.defaultSeries){a(f,f.defaultSeries);if(f.defaultSeries.stackedWith){f.defaultSeries.stacked=f.defaultSeries.stackedWith;delete f.defaultSeries.stackedWith}}if(f.series){for(var h in f.series){a(f,f.series[h]);if(f.series[h].values){for(var i in f.series[h].values){a(f,f.series[h].values[i])}}if(f.series[h].stackedWith){f.series[h].stacked=f.series[h].stackedWith;delete f.series[h].stackedWith}}}if(f.type=="line"){if(!f.features){f.features={}}if(!f.features.grid){f.features.grid={}}if(typeof f.gridNX!="undefined"){f.features.grid.nx=f.gridNX;delete f.gridNX}if(typeof f.gridNY!="undefined"){f.features.grid.ny=f.gridNY;delete f.gridNY}if(typeof f.gridProps!="undefined"){f.features.grid.props=f.gridProps;delete f.gridProps}if(typeof f.gridExtra!="undefined"){f.features.grid.extra=f.gridExtra;delete f.gridExtra}if(typeof f.gridForceBorder!="undefined"){f.features.grid.forceBorder=f.gridForceBorder;delete f.gridForceBorder}if(f.defaultAxis&&f.defaultAxis.normalize&&(f.defaultAxis.normalize=="auto"||f.defaultAxis.normalize=="autony")){f.defaultAxis.normalize=2}if(f.axis){for(var g in f.axis){if(f.axis[g]&&f.axis[g].normalize&&(f.axis[g].normalize=="auto"||f.axis[g].normalize=="autony")){f.axis[g].normalize=2}}}}return f}function a(f,h){if(h.color){var g=h.color;if(!h.plotProps){h.plotProps={}}if(h.type=="line"||(f.type=="line"&&!h.type)){if(h.plotProps&&!h.plotProps.stroke){h.plotProps.stroke=g}}else{if(h.plotProps&&!h.plotProps.fill){h.plotProps.fill=g}}if(!h.tooltip){h.tooltip={}}if(!h.tooltip.frameProps){h.tooltip.frameProps={}}if(h.tooltip&&h.tooltip.frameProps&&!h.tooltip.frameProps.stroke){h.tooltip.frameProps.stroke=g}if(!h.legend){h.legend={}}if(!h.legend.dotProps){h.legend.dotProps={}}if(h.legend.dotProps&&!h.legend.dotProps.fill){h.legend.dotProps.fill=g}if(f.type=="line"&&(h.type=="line"||!h.type)){if(!h.dotProps){h.dotProps={}}if(h.dotProps&&!h.dotProps.fill){h.dotProps.fill=g}if(!h.fillProps){h.fillProps={}}if(h.fillProps&&!h.fillProps.fill){h.fillProps.fill=g}}}}d.elycharts.common={_RaphaelInstance:function(j,f,g){var i=Raphael(j,f,g);i.customAttributes.slice=function(h,p,m,l,o,n){a1=360-n;a2=360-o;var k=(a2-a1)>180;a1=(a1%360)*Math.PI/180;a2=(a2%360)*Math.PI/180;if(a1==a2&&o!=n){a2+=359.99*Math.PI/180}return{path:l?[["M",h+m*Math.cos(a1),p+m*Math.sin(a1)],["A",m,m,0,+k,1,h+m*Math.cos(a2),p+m*Math.sin(a2)],["L",h+l*Math.cos(a2),p+l*Math.sin(a2)],["A",l,l,0,+k,0,h+l*Math.cos(a1),p+l*Math.sin(a1)],["z"]]:[["M",h,p],["l",m*Math.cos(a1),m*Math.sin(a1)],["A",m,m,0,+k,1,h+m*Math.cos(a2),p+m*Math.sin(a2)],["z"]]}};return i},_clone:function(h){if(h==null||typeof(h)!="object"){return h}if(h.constructor==Array){return[].concat(h)}var f=new h.constructor();for(var g in h){f[g]=this._clone(h[g])}return f},_mergeObjects:function(g,f){return d.extend(true,g,f)},compactUnits:function(j,g){for(var h=g.length-1;h>=0;h--){var f=j/Math.pow(1000,h+1);if(f>=1&&f*10%10==0){return f+g[h]}}return j},getElementOriginalAttrs:function(g){var f=d(g.node).data("original-attr");if(!f){f=g.attr();d(g.node).data("original-attr",f)}return f},findInPieces:function(j,l,h,f,k){for(var g=0;g<j.length;g++){if((typeof l==undefined||l==-1||l==false||j[g].section==l)&&(typeof h==undefined||h==-1||h==false||j[g].serie==h)&&(typeof f==undefined||f==-1||f==false||j[g].index==f)&&(typeof k==undefined||k==-1||k==false||j[g].subSection==k)){return j[g]}}return false},samePiecePath:function(g,f){return(((typeof g.section==undefined||g.section==-1||g.section==false)&&(typeof f.section==undefined||f.section==-1||f.section==false))||g.section==f.section)&&(((typeof g.serie==undefined||g.serie==-1||g.serie==false)&&(typeof f.serie==undefined||f.serie==-1||f.serie==false))||g.serie==f.serie)&&(((typeof g.index==undefined||g.index==-1||g.index==false)&&(typeof f.index==undefined||f.index==-1||f.index==false))||g.index==f.index)&&(((typeof g.subSection==undefined||g.subSection==-1||g.subSection==false)&&(typeof f.subSection==undefined||f.subSection==-1||f.subSection==false))||g.subSection==f.subSection)},executeIfChanged:function(k,h){if(!k.newopt){return true}for(var g=0;g<h.length;g++){if(h[g][h[g].length-1]=="*"){for(var f in k.newopt){if(f.substring(0,h[g].length-1)+"*"==h[g]){return true}}}else{if(h[g]=="series"&&(k.newopt.series||k.newopt.defaultSeries)){return true}else{if(h[g]=="axis"&&(k.newopt.axis||k.newopt.defaultAxis)){return true}else{if(h[g].substring(0,9)=="features."){h[g]=h[g].substring(9);if(k.newopt.features&&k.newopt.features[h[g]]){return true}}else{if(typeof k.newopt[h[g]]!="undefined"){return true}}}}}}return false},areaProps:function(h,k,i,f,j){var g;if(!j){if(typeof i=="undefined"||!i){g=h.opt[k.toLowerCase()]}else{g=this._clone(h.opt["default"+k]);if(h.opt[k.toLowerCase()]&&h.opt[k.toLowerCase()][i]){g=this._mergeObjects(g,h.opt[k.toLowerCase()][i])}if((typeof f!="undefined")&&f>=0&&g.values&&g.values[f]){g=this._mergeObjects(g,g.values[f])}}}else{g=this._clone(h.opt[j.toLowerCase()]);if(typeof i=="undefined"||!i){if(h.opt[k.toLowerCase()]&&h.opt[k.toLowerCase()][j.toLowerCase()]){g=this._mergeObjects(g,h.opt[k.toLowerCase()][j.toLowerCase()])}}else{if(h.opt["default"+k]&&h.opt["default"+k][j.toLowerCase()]){g=this._mergeObjects(g,h.opt["default"+k][j.toLowerCase()])}if(h.opt[k.toLowerCase()]&&h.opt[k.toLowerCase()][i]&&h.opt[k.toLowerCase()][i][j.toLowerCase()]){g=this._mergeObjects(g,h.opt[k.toLowerCase()][i][j.toLowerCase()])}if(g&&(typeof f!="undefined")&&f>0&&g.values&&g.values[f]){g=this._mergeObjects(g,g.values[f])}}}return g},absrectpath:function(g,i,f,h,j){return[["M",g,i],["L",g,h],["L",f,h],["L",f,i],["z"]]},linepathAnchors:function(h,g,s,q,n,m,j){var f=1;if(j&&j.length){f=j[1];j=j[0]}if(!j){j=1}var k=(s-h)/2,i=(n-s)/2,t=Math.atan((s-h)/Math.abs(q-g)),r=Math.atan((n-s)/Math.abs(q-m));t=g<q?Math.PI-t:t;r=m<q?Math.PI-r:r;if(f==2){if(Math.abs(t-Math.PI/2)<Math.abs(r-Math.PI/2)){r=Math.PI-t}else{t=Math.PI-r}}var l=Math.PI/2-((t+r)%(Math.PI*2))/2,v=k*Math.sin(l+t)/2/j,p=k*Math.cos(l+t)/2/j,u=i*Math.sin(l+r)/2/j,o=i*Math.cos(l+r)/2/j;return{x1:s-v,y1:q+p,x2:s+u,y2:q+o}},linepathRevert:function(j){var f=[],h=false;for(var g=j.length-1;g>=0;g--){switch(j[g][0]){case"M":case"L":if(!h){f.push([f.length?"L":"M",j[g][1],j[g][2]])}else{f.push(["C",h[0],h[1],h[2],h[3],j[g][1],j[g][2]])}h=false;break;case"C":if(!h){f.push([f.length?"L":"M",j[g][5],j[g][6]])}else{f.push(["C",h[0],h[1],h[2],h[3],j[g][5],j[g][6]])}h=[j[g][3],j[g][4],j[g][1],j[g][2]]}}return f},linepath:function(p,f){var q=[];if(f){var k=false;for(var g=0,l=p.length-1;g<l;g++){if(g){var o=this.linepathAnchors(p[g-1][0],p[g-1][1],p[g][0],p[g][1],p[g+1][0],p[g+1][1],f);q.push(["C",k[0],k[1],o.x1,o.y1,p[g][0],p[g][1]]);k=[o.x2,o.y2]}else{q.push(["M",p[g][0],p[g][1]]);k=[p[g][0],p[g][1]]}}if(k){q.push(["C",k[0],k[1],p[l][0],p[l][1],p[l][0],p[l][1]])}}else{for(var h=0;h<p.length;h++){var n=p[h][0],m=p[h][1];q.push([h==0?"M":"L",n,m])}}return q},lineareapath:function(h,g,f){var l=this.linepath(h,f),k=this.linepathRevert(this.linepath(g,f));for(var j=0;j<k.length;j++){l.push(!j?["L",k[0][1],k[0][2]]:k[j])}l.push(["z"]);return l},getX:function(f,g){switch(f[0]){case"CIRCLE":return f[1];case"RECT":return f[!g?1:3];case"SLICE":return f[1];default:return f[f.length-2]}},getY:function(f,g){switch(f[0]){case"CIRCLE":return f[2];case"RECT":return f[!g?2:4];case"SLICE":return f[2];default:return f[f.length-1]}},getCenter:function(i,j){if(!i.path){return false}if(i.path.length==0){return false}if(!j){j=[0,0]}if(i.center){return[i.center[0]+j[0],i.center[1]+j[1]]}var h=i.path[0];switch(h[0]){case"CIRCLE":return[h[1]+j[0],h[2]+j[1]];case"RECT":return[(h[1]+h[2])/2+j[0],(h[3]+h[4])/2+j[1]];case"SLICE":var g=h[5]+(h[6]-h[5])/2;var f=Math.PI/180;return[h[1]+(h[4]+((h[3]-h[4])/2)+j[0])*Math.cos(-g*f)+j[1]*Math.cos((-g-90)*f),h[2]+(h[4]+((h[3]-h[4])/2)+j[0])*Math.sin(-g*f)+j[1]*Math.sin((-g-90)*f)]}alert("ElyCharts: getCenter with complex path not supported");return false},movePath:function(s,z,q,m,f){var g=[],r;if(z.length==1&&z[0][0]=="RECT"){return[[z[0][0],this._movePathX(s,z[0][1],q[0],m),this._movePathY(s,z[0][2],q[1],m),this._movePathX(s,z[0][3],q[0],m),this._movePathY(s,z[0][4],q[1],m)]]}if(z.length==1&&z[0][0]=="SLICE"){if(!f){var w=z[0][5]+(z[0][6]-z[0][5])/2;var t=Math.PI/180;var v=z[0][1]+q[0]*Math.cos(-w*t)+q[1]*Math.cos((-w-90)*t);var u=z[0][2]+q[0]*Math.sin(-w*t)+q[1]*Math.cos((-w-90)*t);return[[z[0][0],v,u,z[0][3],z[0][4],z[0][5],z[0][6]]]}else{return[[z[0][0],z[0][1]+q[0],z[0][2]+q[1],z[0][3],z[0][4],z[0][5],z[0][6]]]}}if(z.length==1&&z[0][0]=="CIRCLE"){return[[z[0][0],z[0][1]+q[0],z[0][2]+q[1],z[0][3]]]}if(z.length==1&&z[0][0]=="TEXT"){return[[z[0][0],z[0][1],z[0][2]+q[0],z[0][3]+q[1]]]}if(z.length==1&&z[0][0]=="LINE"){for(r=0;r<z[0][1].length;r++){g.push([this._movePathX(s,z[0][1][r][0],q[0],m),this._movePathY(s,z[0][1][r][1],q[1],m)])}return[[z[0][0],g,z[0][2]]]}if(z.length==1&&z[0][0]=="LINEAREA"){for(r=0;r<z[0][1].length;r++){g.push([this._movePathX(s,z[0][1][r][0],q[0],m),this._movePathY(s,z[0][1][r][1],q[1],m)])}var k=[];for(r=0;r<z[0][2].length;r++){k.push([this._movePathX(s,z[0][2][r][0],q[0],m),this._movePathY(s,z[0][2][r][1],q[1],m)])}return[[z[0][0],g,k,z[0][3]]]}var l=[];for(var n=0;n<z.length;n++){var h=z[n];switch(h[0]){case"M":case"m":case"L":case"l":case"T":case"t":l.push([h[0],this._movePathX(s,h[1],q[0],m),this._movePathY(s,h[2],q[1],m)]);break;case"A":case"a":l.push([h[0],h[1],h[2],h[3],h[4],h[5],this._movePathX(s,h[6],q[0],m),this._movePathY(s,h[7],q[1],m)]);break;case"C":case"c":l.push([h[0],h[1],h[2],h[3],h[4],this._movePathX(s,h[5],q[0],m),this._movePathY(s,h[6],q[1],m)]);break;case"S":case"s":case"Q":case"q":l.push([h[0],h[1],h[2],this._movePathX(s,h[3],q[0],m),this._movePathY(s,h[4],q[1],m)]);break;case"z":case"Z":l.push([h[0]]);break}}return l},_movePathX:function(h,f,g,i){if(!i){return f+g}f=f+g;return g>0&&f>h.opt.width-h.opt.margins[1]?h.opt.width-h.opt.margins[1]:(g<0&&f<h.opt.margins[3]?h.opt.margins[3]:f)},_movePathY:function(g,i,f,h){if(!h){return i+f}i=i+f;return f>0&&i>g.opt.height-g.opt.margins[2]?g.opt.height-g.opt.margins[2]:(f<0&&i<g.opt.margins[0]?g.opt.margins[0]:i)},getSVGProps:function(h,f){var g=f?f:{};if(h.length==1&&h[0][0]=="RECT"){g.path=b.absrectpath(h[0][1],h[0][2],h[0][3],h[0][4],h[0][5])}else{if(h.length==1&&h[0][0]=="SLICE"){g.slice=[h[0][1],h[0][2],h[0][3],h[0][4],h[0][5],h[0][6]]}else{if(h.length==1&&h[0][0]=="LINE"){g.path=b.linepath(h[0][1],h[0][2])}else{if(h.length==1&&h[0][0]=="LINEAREA"){g.path=b.lineareapath(h[0][1],h[0][2],h[0][3])}else{if(h.length==1&&(h[0][0]=="CIRCLE"||h[0][0]=="TEXT"||h[0][0]=="DOMELEMENT"||h[0][0]=="RELEMENT")){return false}else{g.path=h}}}}}return g},showPath:function(g,h,i){h=this.preparePathShow(g,h);if(!i){i=g.paper}if(h.length==1&&h[0][0]=="CIRCLE"){return i.circle(h[0][1],h[0][2],h[0][3])}if(h.length==1&&h[0][0]=="TEXT"){return i.text(h[0][2],h[0][3],h[0][1])}var f=this.getSVGProps(h);return f?i.path().attr(f):false},preparePathShow:function(f,g){return f.opt.features.pixelWorkAround.active?this.movePath(f,this._clone(g),[0.5,0.5],false,true):g},getPieceFullAttr:function(g,f){if(!f.fullattr){f.fullattr=this._clone(f.attr);if(f.path){switch(f.path[0][0]){case"CIRCLE":var h=this.preparePathShow(g,f.path);f.fullattr.cx=h[0][1];f.fullattr.cy=h[0][2];f.fullattr.r=h[0][3];break;case"TEXT":case"DOMELEMENT":case"RELEMENT":break;default:f.fullattr=this.getSVGProps(this.preparePathShow(g,f.path),f.fullattr)}}if(typeof f.fullattr.opacity=="undefined"){f.fullattr.opacity=1}}return f.fullattr},show:function(h,j){b.animationStackStart(h);if(d.isPlainObject(j)){for(var k in j){this.show(h,j[k])}}else{for(var f=0;f<j.length;f++){var g=j[f];if(typeof g.show=="undefined"||g.show){if(g.paths){this.show(h,g.paths)}else{g.element=g.animation&&g.animation.element?g.animation.element:false;g.hide=false;if(!g.path){g.hide=true}else{if(g.path.length==1&&g.path[0][0]=="TEXT"){if(g.element){b.animationStackPush(h,g,g.element,false,g.animation.speed,g.animation.easing,g.animation.delay,true);g.animation.element=false}g.element=this.showPath(h,g.path)}else{if(g.path.length==1&&g.path[0][0]=="DOMELEMENT"){}else{if(g.path.length==1&&g.path[0][0]=="RELEMENT"){if(g.element){b.animationStackPush(h,g,g.element,false,g.animation.speed,g.animation.easing,g.animation.delay,true);g.animation.element=false}g.element=g.path[0][1];g.attr=false}else{if(!g.element){if(g.animation&&g.animation.startPath&&g.animation.startPath.length){g.element=this.showPath(h,g.animation.startPath)}else{g.element=this.showPath(h,g.path)}}}}}}if(g.element){if(g.attr){if(!g.animation){if(typeof g.attr.opacity=="undefined"){g.attr.opacity=1}g.element.attr(g.attr)}else{if(!g.animation.element){g.element.attr(g.animation.startAttr?g.animation.startAttr:g.attr)}b.animationStackPush(h,g,g.element,this.getPieceFullAttr(h,g),g.animation.speed,g.animation.easing,g.animation.delay)}}else{if(g.hide){b.animationStackPush(h,g,g.element,false,g.animation.speed,g.animation.easing,g.animation.delay)}}}}}}}b.animationStackEnd(h)},animationStackStart:function(f){if(!f.animationStackDepth||f.animationStackDepth==0){f.animationStackDepth=0;f.animationStack={}}f.animationStackDepth++},animationStackEnd:function(g){g.animationStackDepth--;if(g.animationStackDepth==0){for(var f in g.animationStack){this._animationStackAnimate(g.animationStack[f],f);delete g.animationStack[f]}g.animationStack={}}},animationStackPush:function(j,i,h,f,l,m,g,k){if(typeof g=="undefined"){g=0}if(!j.animationStackDepth||j.animationStackDepth==0){this._animationStackAnimate([{piece:i,object:h,props:f,speed:l,easing:m,force:k}],g)}else{if(!j.animationStack[g]){j.animationStack[g]=[]}j.animationStack[g].push({piece:i,object:h,props:f,speed:l,easing:m,force:k})}},_animationStackAnimate:function(f,h){var g=this;var i=function(){var k=f.pop();g._animationStackAnimateElement(k);while(f.length>0){var j=f.pop();g._animationStackAnimateElement(j,k)}};if(h>0){setTimeout(i,h)}else{i()}},_animationStackAnimateElement:function(f,h){if(f.force||!f.piece.animationInProgress){f.object.stop();if(!f.props){f.props={opacity:0}}if(!f.speed||f.speed<=0){f.object.attr(f.props);f.piece.animationInProgress=false;return}f.piece.animationInProgress=true;var g=function(){f.piece.animationInProgress=false};if(h){f.object.animateWith(h,f.props,f.speed,f.easing?f.easing:"linear",g)}else{f.object.animate(f.props,f.speed,f.easing?f.easing:"linear",g)}}}};var b=d.elycharts.common;d.elycharts.featuresmanager={managers:[],initialized:false,register:function(g,f){d.elycharts.featuresmanager.managers.push([f,g]);d.elycharts.featuresmanager.initialized=false},init:function(){d.elycharts.featuresmanager.managers.sort(function(g,f){return g[0]<f[0]?-1:(g[0]==f[0]?0:1)});d.elycharts.featuresmanager.initialized=true},beforeShow:function(g,h){if(!d.elycharts.featuresmanager.initialized){this.init()}for(var f=0;f<d.elycharts.featuresmanager.managers.length;f++){if(d.elycharts.featuresmanager.managers[f][1].beforeShow){d.elycharts.featuresmanager.managers[f][1].beforeShow(g,h)}}},afterShow:function(g,h){if(!d.elycharts.featuresmanager.initialized){this.init()}for(var f=0;f<d.elycharts.featuresmanager.managers.length;f++){if(d.elycharts.featuresmanager.managers[f][1].afterShow){d.elycharts.featuresmanager.managers[f][1].afterShow(g,h)}}},onMouseOver:function(j,k,g,f){if(!d.elycharts.featuresmanager.initialized){this.init()}for(var h=0;h<d.elycharts.featuresmanager.managers.length;h++){if(d.elycharts.featuresmanager.managers[h][1].onMouseOver){d.elycharts.featuresmanager.managers[h][1].onMouseOver(j,k,g,f)}}},onMouseOut:function(j,k,g,f){if(!d.elycharts.featuresmanager.initialized){this.init()}for(var h=0;h<d.elycharts.featuresmanager.managers.length;h++){if(d.elycharts.featuresmanager.managers[h][1].onMouseOut){d.elycharts.featuresmanager.managers[h][1].onMouseOut(j,k,g,f)}}},onMouseEnter:function(j,k,g,f){if(!d.elycharts.featuresmanager.initialized){this.init()}for(var h=0;h<d.elycharts.featuresmanager.managers.length;h++){if(d.elycharts.featuresmanager.managers[h][1].onMouseEnter){d.elycharts.featuresmanager.managers[h][1].onMouseEnter(j,k,g,f)}}},onMouseChanged:function(j,k,g,f){if(!d.elycharts.featuresmanager.initialized){this.init()}for(var h=0;h<d.elycharts.featuresmanager.managers.length;h++){if(d.elycharts.featuresmanager.managers[h][1].onMouseChanged){d.elycharts.featuresmanager.managers[h][1].onMouseChanged(j,k,g,f)}}},onMouseExit:function(j,k,g,f){if(!d.elycharts.featuresmanager.initialized){this.init()}for(var h=0;h<d.elycharts.featuresmanager.managers.length;h++){if(d.elycharts.featuresmanager.managers[h][1].onMouseExit){d.elycharts.featuresmanager.managers[h][1].onMouseExit(j,k,g,f)}}}}})(jQuery);(function(c){var a=c.elycharts.featuresmanager;var b=c.elycharts.common;c.elycharts.anchormanager={afterShow:function(f,h){if(!f.opt.anchors){return}if(!f.anchorBinds){f.anchorBinds=[]}while(f.anchorBinds.length){var d=f.anchorBinds.pop();c(d[0]).unbind(d[1],d[2])}for(var e=0;e<f.mouseAreas.length;e++){var g=f.mouseAreas[e].piece?f.mouseAreas[e].piece.serie:false;var j;if(g){j=f.opt.anchors[g][f.mouseAreas[e].index]}else{j=f.opt.anchors[f.mouseAreas[e].index]}if(j&&f.mouseAreas[e].props.anchor&&f.mouseAreas[e].props.anchor.highlight){(function(m,k,n,l){var i=function(){l.anchorMouseOver(m,k)};var o=function(){l.anchorMouseOut(m,k)};if(!m.mouseAreas[e].props.anchor.useMouseEnter){m.anchorBinds.push([n,"mouseover",i]);m.anchorBinds.push([n,"mouseout",o]);c(n).mouseover(i);c(n).mouseout(o)}else{m.anchorBinds.push([n,"mouseenter",i]);m.anchorBinds.push([n,"mouseleave",o]);c(n).mouseenter(i);c(n).mouseleave(o)}})(f,f.mouseAreas[e],j,this)}}f.onAnchors=[]},anchorMouseOver:function(e,d){c.elycharts.highlightmanager.onMouseOver(e,d.piece?d.piece.serie:false,d.index,d)},anchorMouseOut:function(e,d){c.elycharts.highlightmanager.onMouseOut(e,d.piece?d.piece.serie:false,d.index,d)},onMouseOver:function(f,g,e,d){if(!f.opt.anchors){return}if(d.props.anchor&&d.props.anchor.addClass){var h;if(g){h=f.opt.anchors[g][d.index]}else{h=f.opt.anchors[d.index]}if(h){c(h).addClass(d.props.anchor.addClass);f.onAnchors.push([h,d.props.anchor.addClass])}}},onMouseOut:function(f,g,e,d){if(!f.opt.anchors){return}while(f.onAnchors.length>0){var h=f.onAnchors.pop();c(h[0]).removeClass(h[1])}}};c.elycharts.featuresmanager.register(c.elycharts.anchormanager,30)})(jQuery);(function(c){var a=c.elycharts.featuresmanager;var b=c.elycharts.common;c.elycharts.animationmanager={beforeShow:function(d,e){if(!d.newopt){this.startAnimation(d,e)}else{this.stepAnimation(d,e)}},stepAnimation:function(d,e){e=this._stepAnimationInt(d,d.pieces,e)},_stepAnimationInt:function(n,e,d,p,l,k){var g=[],m;var f=0;for(var h=0;h<e.length;h++){var o=b.areaProps(n,p?p:e[h].section,l?l:e[h].serie);if(o&&o.stepAnimation){o=o.stepAnimation}else{o=n.opt.features.animation.stepAnimation}if(d&&(f>=d.length||!b.samePiecePath(e[h],d[f]))){if(!k){e[h].show=false;g.push(e[h])}else{m={path:false,attr:false,show:true};m.animation={element:e[h].element?e[h].element:false,speed:o&&o.speed?o.speed:300,easing:o&&o.easing?o.easing:"",delay:o&&o.delay?o.delay:0};g.push(m)}}else{m=d?d[f]:{path:false,attr:false};m.show=true;if(typeof e[h].paths=="undefined"){m.animation={element:e[h].element?e[h].element:false,speed:o&&o.speed?o.speed:300,easing:o&&o.easing?o.easing:"",delay:o&&o.delay?o.delay:0};if(!e[h].element){m.animation.startAttr={opacity:0}}}else{m.paths=this._stepAnimationInt(n,e[h].paths,d[f].paths,e[h].section,e[h].serie,true)}g.push(m);f++}}if(d){for(;f<d.length;f++){g.push(d[f])}}return g},startAnimation:function(f,g){for(var d=0;d<g.length;d++){if(g[d].paths||g[d].path){var e=b.areaProps(f,g[d].section,g[d].serie);if(e&&e.startAnimation){e=e.startAnimation}else{e=f.opt.features.animation.startAnimation}if(e.active){if(e.type=="simple"||g[d].section!="Series"){this.animationSimple(f,e,g[d])}if(e.type=="grow"){this.animationGrow(f,e,g[d])}if(e.type=="avg"){this.animationAvg(f,e,g[d])}if(e.type=="reg"){this.animationReg(f,e,g[d])}}}}},_animationPiece:function(e,g,f){if(e.paths){for(var d=0;d<e.paths.length;d++){this._animationPiece(e.paths[d],g,f)}}else{if(e.path){e.animation={speed:g.speed,easing:g.easing,delay:g.delay,startPath:[],startAttr:b._clone(e.attr)};if(g.propsTo){e.attr=b._mergeObjects(e.attr,g.propsTo)}if(g.propsFrom){e.animation.startAttr=b._mergeObjects(e.animation.startAttr,g.propsFrom)}if(f&&g[f.toLowerCase()+"PropsFrom"]){e.animation.startAttr=b._mergeObjects(e.animation.startAttr,g[f.toLowerCase()+"PropsFrom"])}if(typeof e.animation.startAttr.opacity!="undefined"&&typeof e.attr.opacity=="undefined"){e.attr.opacity=1}}}},animationSimple:function(f,e,d){this._animationPiece(d,e,d.subSection)},animationGrow:function(h,g,f){this._animationPiece(f,g,f.subSection);var e,j,k;switch(h.opt.type){case"line":k=h.opt.height-h.opt.margins[2];switch(f.subSection){case"Plot":if(!f.paths){j=["LINE",[],f.path[0][2]];for(e=0;e<f.path[0][1].length;e++){j[1].push([f.path[0][1][e][0],k])}f.animation.startPath.push(j)}else{for(e=0;e<f.paths.length;e++){if(f.paths[e].path){f.paths[e].animation.startPath.push(["RECT",f.paths[e].path[0][1],k,f.paths[e].path[0][3],k])}}}break;case"Fill":j=["LINEAREA",[],[],f.path[0][3]];for(e=0;e<f.path[0][1].length;e++){j[1].push([f.path[0][1][e][0],k]);j[2].push([f.path[0][2][e][0],k])}f.animation.startPath.push(j);break;case"Dot":for(e=0;e<f.paths.length;e++){if(f.paths[e].path){f.paths[e].animation.startPath.push(["CIRCLE",f.paths[e].path[0][1],k,f.paths[e].path[0][3]])}}break}break;case"pie":if(f.subSection=="Plot"){for(e=0;e<f.paths.length;e++){if(f.paths[e].path&&f.paths[e].path[0][0]=="SLICE"){f.paths[e].animation.startPath.push(["SLICE",f.paths[e].path[0][1],f.paths[e].path[0][2],f.paths[e].path[0][4]+f.paths[e].path[0][3]*0.1,f.paths[e].path[0][4],f.paths[e].path[0][5],f.paths[e].path[0][6]])}}}break;case"funnel":alert("Unsupported animation GROW for funnel");break;case"barline":var d;if(f.section=="Series"&&f.subSection=="Plot"){if(!g.subType){d=h.opt.direction!="rtl"?h.opt.margins[3]:h.opt.width-h.opt.margins[1]}else{if(g.subType==1){d=h.opt.direction!="rtl"?h.opt.width-h.opt.margins[1]:h.opt.margins[3]}}for(e=0;e<f.paths.length;e++){if(f.paths[e].path){if(!g.subType||g.subType==1){f.paths[e].animation.startPath.push(["RECT",d,f.paths[e].path[0][2],d,f.paths[e].path[0][4],f.paths[e].path[0][5]])}else{k=(f.paths[e].path[0][2]+f.paths[e].path[0][4])/2;f.paths[e].animation.startPath.push(["RECT",f.paths[e].path[0][1],k,f.paths[e].path[0][3],k,f.paths[e].path[0][5]])}}}}break}},_animationAvgXYArray:function(d){var f=[],g=0,e;for(e=0;e<d.length;e++){g+=d[e][1]}g=g/d.length;for(e=0;e<d.length;e++){f.push([d[e][0],g])}return f},animationAvg:function(h,g,f){this._animationPiece(f,g,f.subSection);var j=0,e,d;switch(h.opt.type){case"line":switch(f.subSection){case"Plot":if(!f.paths){f.animation.startPath.push(["LINE",this._animationAvgXYArray(f.path[0][1]),f.path[0][2]])}else{d=0;for(e=0;e<f.paths.length;e++){if(f.paths[e].path){d++;j+=f.paths[e].path[0][2]}}j=j/d;for(e=0;e<f.paths.length;e++){if(f.paths[e].path){f.paths[e].animation.startPath.push(["RECT",f.paths[e].path[0][1],j,f.paths[e].path[0][3],f.paths[e].path[0][4]])}}}break;case"Fill":f.animation.startPath.push(["LINEAREA",this._animationAvgXYArray(f.path[0][1]),this._animationAvgXYArray(f.path[0][2]),f.path[0][3]]);break;case"Dot":d=0;for(e=0;e<f.paths.length;e++){if(f.paths[e].path){d++;j+=f.paths[e].path[0][2]}}j=j/d;for(e=0;e<f.paths.length;e++){if(f.paths[e].path){f.paths[e].animation.startPath.push(["CIRCLE",f.paths[e].path[0][1],j,f.paths[e].path[0][3]])}}break}break;case"pie":var k=360/f.paths.length;if(f.subSection=="Plot"){for(e=0;e<f.paths.length;e++){if(f.paths[e].path&&f.paths[e].path[0][0]=="SLICE"){f.paths[e].animation.startPath.push(["SLICE",f.paths[e].path[0][1],f.paths[e].path[0][2],f.paths[e].path[0][3],f.paths[e].path[0][4],e*k,(e+1)*k])}}}break;case"funnel":alert("Unsupported animation AVG for funnel");break;case"barline":alert("Unsupported animation AVG for barline");break}},_animationRegXYArray:function(d){var g=[];var j=d.length;var h=d[0][1];var f=d[j-1][1];for(var e=0;e<d.length;e++){g.push([d[e][0],h+(f-h)/(j-1)*e])}return g},animationReg:function(j,h,g){this._animationPiece(g,h,g.subSection);var e,k,f,d;switch(j.opt.type){case"line":switch(g.subSection){case"Plot":if(!g.paths){g.animation.startPath.push(["LINE",this._animationRegXYArray(g.path[0][1]),g.path[0][2]])}else{k=g.paths.length;if(k>1){for(e=0;!g.paths[e].path&&e<g.paths.length;e++){}f=g.paths[e].path?b.getY(g.paths[e].path[0]):0;for(e=g.paths.length-1;!g.paths[e].path&&e>=0;e--){}d=g.paths[e].path?b.getY(g.paths[e].path[0]):0;for(e=0;e<g.paths.length;e++){if(g.paths[e].path){g.paths[e].animation.startPath.push(["RECT",g.paths[e].path[0][1],f+(d-f)/(k-1)*e,g.paths[e].path[0][3],g.paths[e].path[0][4]])}}}}break;case"Fill":g.animation.startPath.push(["LINEAREA",this._animationRegXYArray(g.path[0][1]),this._animationRegXYArray(g.path[0][2]),g.path[0][3]]);break;case"Dot":k=g.paths.length;if(k>1){for(e=0;!g.paths[e].path&&e<g.paths.length;e++){}f=g.paths[e].path?b.getY(g.paths[e].path[0]):0;for(e=g.paths.length-1;!g.paths[e].path&&e>=0;e--){}d=g.paths[e].path?b.getY(g.paths[e].path[0]):0;for(e=0;e<g.paths.length;e++){if(g.paths[e].path){g.paths[e].animation.startPath.push(["CIRCLE",g.paths[e].path[0][1],f+(d-f)/(k-1)*e,g.paths[e].path[0][3]])}}}break}break;case"pie":alert("Unsupported animation REG for pie");break;case"funnel":alert("Unsupported animation REG for funnel");break;case"barline":alert("Unsupported animation REG for barline");break}}};c.elycharts.featuresmanager.register(c.elycharts.animationmanager,10);c.elycharts.frameanimationmanager={beforeShow:function(d,e){if(d.opt.features.frameAnimation.active){c(d.container.get(0)).css(d.opt.features.frameAnimation.cssFrom)}},afterShow:function(d,e){if(d.opt.features.frameAnimation.active){d.container.animate(d.opt.features.frameAnimation.cssTo,d.opt.features.frameAnimation.speed,d.opt.features.frameAnimation.easing)}}};c.elycharts.featuresmanager.register(c.elycharts.frameanimationmanager,90)})(jQuery);(function(c){var a=c.elycharts.featuresmanager;var b=c.elycharts.common;c.elycharts.balloonmanager={afterShow:function(h,j){if(h.opt.features.balloons.active&&h.opt.balloons&&h.opt.type=="funnel"){var f=h.opt.features.balloons;var d=false,k=false;for(var g=0;g<j.length;g++){if(j[g].section=="Series"&&j[g].subSection=="Plot"){for(var e=0;e<j[g].paths.length;e++){if(h.opt.balloons[j[g].serie]&&h.opt.balloons[j[g].serie][e]){d=j[g].serie;k=e;this.drawBalloon(h,d,e,j[g].paths[e].rect)}}}else{if(d&&j[g].section=="Sector"&&j[g].serie=="bottom"&&!j[g].subSection&&k<h.opt.balloons[d].length-1){this.drawBalloon(h,d,h.opt.balloons[d].length-1,j[g].rect)}}}}},drawBalloon:function(g,f,h,k){var i=g.opt.features.balloons;var m=g.opt.balloons[f][h];var d={position:"absolute","z-index":25,margin:k[1]+"px 0 0 "+i.left+"px",height:(i.height?i.height:k[3]-k[1])-i.padding[0]*2,width:i.width?i.width:k[0],padding:i.padding[0]+"px "+i.padding[1]+"px"};if(typeof m=="string"){c("<div></div>").css(d).css(i.style).html(m).prependTo(g.container)}else{c(m).css(d).css(i.style).prependTo(g.container)}if(i.line){var l=[];for(var e=0;e<i.line.length;e++){if(e==0){l.push(["M",k[0]-i.line[e][0],k[1]+i.line[e][1]])}else{if(e==i.line.length-1){l.push(["L",i.left+(i.width?i.width:k[0])-i.line[e][0],k[1]+i.line[e][1]])}else{l.push(["L",k[0]-i.line[e][0],k[1]+i.line[e][1]])}}}b.showPath(g,l).attr(i.lineProps)}}};c.elycharts.featuresmanager.register(c.elycharts.balloonmanager,30)})(jQuery);(function(b){var a=b.elycharts.common;b.elycharts.highlightmanager={afterShow:function(c,d){c.highlighted=[]},onMouseOver:function(D,s,j,G){var r,c;for(var B=0;B<G.pieces.length;B++){if(G.pieces[B].section=="Series"&&G.pieces[B].paths&&(!s||G.pieces[B].serie==s)&&G.pieces[B].paths[j]&&G.pieces[B].paths[j].element){var e=G.pieces[B].paths[j];c=e.element;r=e.path;var u=a.getElementOriginalAttrs(c);var f=s?G.props:a.areaProps(D,G.pieces[B].section,G.pieces[B].serie);var q,F,v;if(r&&f.highlight){if(f.highlight.scale){if(r[0][0]=="RECT"){var n=r[0][3]-r[0][1];var C=r[0][4]-r[0][2];r=[["RECT",r[0][1],r[0][2]-C*(f.highlight.scale[1]-1),r[0][3]+n*(f.highlight.scale[0]-1),r[0][4]]];a.animationStackPush(D,e,c,a.getSVGProps(a.preparePathShow(D,r)),f.highlight.scaleSpeed,f.highlight.scaleEasing)}else{if(r[0][0]=="SLICE"){var E=(r[0][6]-r[0][5])*(f.highlight.scale[1]-1)/2;if(E>90){E=90}r=[["SLICE",r[0][1],r[0][1],r[0][3]*f.highlight.scale[0],r[0][4],r[0][5]-E,r[0][6]+E]];a.animationStackPush(D,e,c,a.getSVGProps(a.preparePathShow(D,r)),f.highlight.scaleSpeed,f.highlight.scaleEasing)}else{if(D.opt.type=="funnel"){var o=(e.rect[2]-e.rect[0])*(f.highlight.scale[0]-1)/2;var m=(e.rect[3]-e.rect[1])*(f.highlight.scale[1]-1)/2;a.animationStackStart(D);r=[a.movePath(D,[r[0]],[-o,-m])[0],a.movePath(D,[r[1]],[+o,-m])[0],a.movePath(D,[r[2]],[+o,+m])[0],a.movePath(D,[r[3]],[-o,+m])[0],r[4]];a.animationStackPush(D,e,c,a.getSVGProps(a.preparePathShow(D,r)),f.highlight.scaleSpeed,f.highlight.scaleEasing,0,true);q=false;if(j>0){F=G.pieces[B].paths[j-1];q=F.element;v=F.path}else{F=a.findInPieces(G.pieces,"Sector","top");if(F){q=F.element;v=F.path}}if(q){v=[v[0],v[1],a.movePath(D,[v[2]],[+o,-m])[0],a.movePath(D,[v[3]],[-o,-m])[0],v[4]];a.animationStackPush(D,F,q,a.getSVGProps(a.preparePathShow(D,v)),f.highlight.scaleSpeed,f.highlight.scaleEasing,0,true);D.highlighted.push({piece:F,cfg:f.highlight})}q=false;if(j<G.pieces[B].paths.length-1){F=G.pieces[B].paths[j+1];q=F.element;v=F.path}else{F=a.findInPieces(G.pieces,"Sector","bottom");if(F){q=F.element;v=F.path}}if(q){v=[a.movePath(D,[v[0]],[-o,+m])[0],a.movePath(D,[v[1]],[+o,+m])[0],v[2],v[3],v[4]];a.animationStackPush(D,F,q,a.getSVGProps(a.preparePathShow(D,v)),f.highlight.scaleSpeed,f.highlight.scaleEasing,0,true);D.highlighted.push({piece:F,cfg:f.highlight})}a.animationStackEnd(D)}}}}if(f.highlight.newProps){for(var H in f.highlight.newProps){if(typeof u[H]=="undefined"){u[H]=false}}a.animationStackPush(D,e,c,f.highlight.newProps)}if(f.highlight.move){var g=b.isArray(f.highlight.move)?f.highlight.move:[f.highlight.move,0];r=a.movePath(D,r,g);a.animationStackPush(D,e,c,a.getSVGProps(a.preparePathShow(D,r)),f.highlight.moveSpeed,f.highlight.moveEasing)}D.highlighted.push({piece:e,cfg:f.highlight});if(f.highlight.overlayProps){c=a.showPath(D,r).attr(f.highlight.overlayProps);u=false;D.highlighted.push({element:c,attr:u,cfg:f.highlight})}}}}if(D.opt.features.highlight.indexHighlight&&D.opt.type=="line"){var p=D.opt.features.highlight.indexHighlight;if(p=="auto"){p=(D.indexCenter=="bar"?"bar":"line")}var A=(D.opt.width-D.opt.margins[3]-D.opt.margins[1])/(D.opt.labels.length>0?D.opt.labels.length:1);var z=(D.opt.width-D.opt.margins[3]-D.opt.margins[1])/(D.opt.labels.length>1?D.opt.labels.length-1:1);var l=true;switch(p){case"bar":r=[["RECT",D.opt.margins[3]+j*A,D.opt.margins[0],D.opt.margins[3]+(j+1)*A,D.opt.height-D.opt.margins[2]]];break;case"line":l=false;case"barline":var k=Math.round((l?A/2:0)+D.opt.margins[3]+j*(l?A:z));r=[["M",k,D.opt.margins[0]],["L",k,D.opt.height-D.opt.margins[2]]]}if(r){c=a.showPath(D,r).attr(D.opt.features.highlight.indexHighlightProps);D.highlighted.push({element:c,attr:false,cfg:D.opt.features.highlight})}}},onMouseOut:function(e,f,d,c){while(e.highlighted.length>0){var g=e.highlighted.pop();if(g.piece){a.animationStackPush(e,g.piece,g.piece.element,a.getPieceFullAttr(e,g.piece),g.cfg.restoreSpeed,g.cfg.restoreEasing,0,true)}else{g.element.remove()}}}};b.elycharts.featuresmanager.register(b.elycharts.highlightmanager,21)})(jQuery);(function(c){var a=c.elycharts.featuresmanager;var b=c.elycharts.common;c.elycharts.labelmanager={beforeShow:function(h,j){if(!b.executeIfChanged(h,["labels","values","series"])){return}if(h.opt.labels&&(h.opt.type=="pie"||h.opt.type=="funnel")){var d=false,l=false;for(var f=0;f<j.length;f++){if(j[f].section=="Series"&&j[f].subSection=="Plot"){var g=b.areaProps(h,"Series",j[f].serie);if(g&&g.label&&g.label.active){var k=[];for(var e=0;e<j[f].paths.length;e++){if(j[f].paths[e].path){d=j[f].serie;l=e;k.push(this.showLabel(h,j[f],j[f].paths[e],j[f].serie,e,j))}else{k.push({path:false,attr:false})}}j.push({section:j[f].section,serie:j[f].serie,subSection:"Label",paths:k})}}else{if(j[f].section=="Sector"&&j[f].serie=="bottom"&&!j[f].subSection&&l<h.opt.labels.length-1){var k=[];k.push(this.showLabel(h,j[f],j[f],"Series",h.opt.labels.length-1,j));j.push({section:j[f].section,serie:j[f].serie,subSection:"Label",paths:k})}}}}},showLabel:function(o,u,t,m,q,l){var k=b.areaProps(o,"Series",m,q);if(o.opt.labels[q]||k.label.label){var i=t;var s=k.label.label?k.label.label:o.opt.labels[q];var e=b.getCenter(i,k.label.offset);if(!k.label.html){var r=k.label.props;if(k.label.frameAnchor){r=b._clone(k.label.props);r["text-anchor"]=k.label.frameAnchor[0];r["alignment-baseline"]=k.label.frameAnchor[1]}return{path:[["TEXT",s,e[0],e[1]]],attr:r}}else{var n=1;var h=b._clone(k.label.style);var g=(typeof h.opacity!="undefined");if(g){n=h.opacity;h.opacity=0}h.position="absolute";h["z-index"]=25;if(typeof s=="string"){var j=c("<div>"+s+"</div>").css(h).prependTo(o.container)}else{var j=c(s).css(h).prependTo(o.container)}if(o.opt.features.debug.active&&j.height()==0){alert("DEBUG: Al gestore label e' stata passata una label ancora senza dimensioni, quindi ancora non disegnata. Per questo motivo il posizionamento potrebbe non essere correto.")}var f=e[0];var d=e[1];if(!k.label.frameAnchor||k.label.frameAnchor[0]=="middle"){f-=j.width()/2}else{if(k.label.frameAnchor&&k.label.frameAnchor[0]=="end"){f-=j.width()}}if(!k.label.frameAnchor||k.label.frameAnchor[1]=="middle"){d-=j.height()/2}else{if(k.label.frameAnchor&&k.label.frameAnchor[1]=="top"){d-=j.height()}}if(g){j.css({margin:d+"px 0 0 "+f+"px",opacity:n})}else{j.css({margin:d+"px 0 0 "+f+"px"})}return{path:[["DOMELEMENT",j]],attr:false}}}}};c.elycharts.featuresmanager.register(c.elycharts.labelmanager,5)})(jQuery);(function(c){var a=c.elycharts.featuresmanager;var b=c.elycharts.common;c.elycharts.legendmanager={afterShow:function(G,f){if(!G.opt.legend||G.opt.legend.length==0){return}var d=G.opt.features.legend;if(d.x=="auto"){var A=1;d.x=0}if(d.width=="auto"){var j=1;d.width=G.opt.width}var p=[["RECT",d.x,d.y,d.x+d.width,d.y+d.height,d.r]];var B=b.showPath(G,p).attr(d.borderProps);if(A||j){B.hide()}var D=0;var s=[];for(var z in G.opt.legend){if(G.opt.type!="pie"){var J={};J[z]=G.opt.legend[z];var e=G.opt.legend.length}else{var J=G.opt.legend[z];var e=G.opt.legend[z].length}for(var E in J){var g=b.areaProps(G,"Series",z,G.opt.type=="pie"?E:false);var k=g.legend&&g.legend.dotProps?g.legend.dotProps:d.dotProps;var I=g.legend&&g.legend.dotType?g.legend.dotType:d.dotType;var H=g.legend&&g.legend.dotWidth?g.legend.dotWidth:d.dotWidth;var v=g.legend&&g.legend.dotHeight?g.legend.dotHeight:d.dotHeight;var u=g.legend&&g.legend.dotR?g.legend.dotR:d.dotR;var m=g.legend&&g.legend.textProps?g.legend.textProps:d.textProps;if(!d.horizontal){var F=(d.height-d.margins[0]-d.margins[2])/e;var o=d.width-d.margins[1]-d.margins[3];var n=Math.floor(d.x+d.margins[3]);var l=Math.floor(d.y+d.margins[0]+F*E)}else{var F=d.height-d.margins[0]-d.margins[2];if(!d.itemWidth||d.itemWidth=="fixed"){var o=(d.width-d.margins[1]-d.margins[3])/e;var n=Math.floor(d.x+d.margins[3]+o*E)}else{var o=(d.width-d.margins[1]-d.margins[3])-D;var n=d.x+d.margins[3]+D}var l=Math.floor(d.y+d.margins[0])}if(I=="rect"){s.push(b.showPath(G,[["RECT",d.dotMargins[0]+n,l+Math.floor((F-v)/2),d.dotMargins[0]+n+H,l+Math.floor((F-v)/2)+v,u]]).attr(k));var C=d.dotMargins[0]+H+d.dotMargins[1]}else{if(I=="circle"){s.push(b.showPath(G,[["CIRCLE",d.dotMargins[0]+n+u,l+u,u]]).attr(k));var C=d.dotMargins[0]+u*2+d.dotMargins[1]}}var r=J[E];var q=b.showPath(G,[["TEXT",r,n+C,l+Math.ceil(F/2)+(c.browser.msie?2:0)]]).attr({"text-anchor":"start"}).attr(m);s.push(q);while(q.getBBox().width>(o-C)&&q.getBBox().width>10){r=r.substring(0,r.length-1);q.attr({text:r})}q.show();if(d.horizontal&&d.itemWidth=="auto"){D+=C+q.getBBox().width+4}else{if(!d.horizontal&&j){D=q.getBBox().width+C>D?q.getBBox().width+C:D}else{D+=o}}}}if(j){d.width=D+d.margins[3]+d.margins[1]}if(A){d.x=Math.floor((G.opt.width-d.width)/2);for(var E in s){if(s[E].attrs.x){s[E].attr("x",s[E].attrs.x+d.x)}else{s[E].attr("path",b.movePath(G,s[E].attrs.path,[d.x,0]))}}}if(j||A){p=[["RECT",d.x,d.y,d.x+d.width,d.y+d.height,d.r]];B.attr(b.getSVGProps(b.preparePathShow(G,p)));B.show()}}};c.elycharts.featuresmanager.register(c.elycharts.legendmanager,90)})(jQuery);(function(c){var a=c.elycharts.featuresmanager;var b=c.elycharts.common;c.elycharts.mousemanager={afterShow:function(m,g){if(!m.opt.interactive){return}if(m.mouseLayer){m.mouseLayer.remove();m.mouseLayer=null;m.mousePaper.remove();m.mousePaper=null;m.mouseTimer=null;m.mouseAreas=null}m.mouseLayer=c("<div></div>").css({position:"absolute","z-index":20,opacity:0}).prependTo(m.container);m.mousePaper=b._RaphaelInstance(m.mouseLayer.get(0),m.opt.width,m.opt.height);var f=m.mousePaper;if(m.opt.features.debug.active&&typeof DP_Debug!="undefined"){m.paper.text(m.opt.width,m.opt.height-5,"DEBUG").attr({"text-anchor":"end",stroke:"red",opacity:0.1});f.text(m.opt.width,m.opt.height-5,"DEBUG").attr({"text-anchor":"end",stroke:"red",opacity:0.1}).click(function(){DP_Debug.dump(m.opt,"",false,4)})}var k,h;m.mouseAreas=[];if(m.opt.features.mousearea.type=="single"){for(k=0;k<g.length;k++){if(g[k].mousearea){if(!g[k].paths){if(g[k].path.length>=1&&(g[k].path[0][0]=="LINE"||g[k].path[0][0]=="LINEAREA")){for(h=0;h<g[k].path[0][1].length;h++){m.mouseAreas.push({path:[["CIRCLE",g[k].path[0][1][h][0],g[k].path[0][1][h][1],10]],piece:g[k],pieces:g,index:h,props:b.areaProps(m,g[k].section,g[k].serie)})}}else{for(h=0;h<g[k].path.length;h++){m.mouseAreas.push({path:[["CIRCLE",b.getX(g[k].path[h]),b.getY(g[k].path[h]),10]],piece:g[k],pieces:g,index:h,props:b.areaProps(m,g[k].section,g[k].serie)})}}}else{if(g[k].paths){for(h=0;h<g[k].paths.length;h++){if(g[k].paths[h].path){m.mouseAreas.push({path:g[k].paths[h].path,piece:g[k],pieces:g,index:h,props:b.areaProps(m,g[k].section,g[k].serie)})}}}}}}}else{var d=m.opt.features.mousearea.indexCenter;if(d=="auto"){d=m.indexCenter}var e,o;if(d=="bar"){o=(m.opt.width-m.opt.margins[3]-m.opt.margins[1])/(m.opt.labels.length>0?m.opt.labels.length:1);e=m.opt.margins[3]}else{o=(m.opt.width-m.opt.margins[3]-m.opt.margins[1])/(m.opt.labels.length>1?m.opt.labels.length-1:1);e=m.opt.margins[3]-o/2}for(var l in m.opt.labels){m.mouseAreas.push({path:[["RECT",e+l*o,m.opt.margins[0],e+(l+1)*o,m.opt.height-m.opt.margins[2]]],piece:false,pieces:g,index:parseInt(l),props:m.opt.defaultSeries})}}var n=false;if(!m.opt.features.mousearea.syncTag){m.mouseareaenv={chartEnv:false,mouseObj:false,caller:false,inArea:-1,timer:false};n=m.mouseareaenv}else{if(!c.elycharts.mouseareaenv){c.elycharts.mouseareaenv={}}if(!c.elycharts.mouseareaenv[m.opt.features.mousearea.syncTag]){c.elycharts.mouseareaenv[m.opt.features.mousearea.syncTag]={chartEnv:false,mouseObj:false,caller:false,inArea:-1,timer:false}}n=c.elycharts.mouseareaenv[m.opt.features.mousearea.syncTag]}for(k=0;k<m.mouseAreas.length;k++){m.mouseAreas[k].area=b.showPath(m,m.mouseAreas[k].path,f).attr({stroke:"none",fill:"#fff",opacity:0});(function(r,t,s,p,j){var q=t.piece;var i=t.index;t.mouseover=function(u){t.event=u;clearTimeout(j.timer);p.onMouseOverArea(r,q,i,t);if(j.chartEnv&&j.chartEnv.id!=r.id){j.caller.onMouseExitArea(j.chartEnv,j.mouseObj.piece,j.mouseObj.index,j.mouseObj);p.onMouseEnterArea(r,q,i,t)}else{if(j.inArea!=s){if(j.inArea<0){p.onMouseEnterArea(r,q,i,t)}else{p.onMouseChangedArea(r,q,i,t)}}}j.chartEnv=r;j.mouseObj=t;j.caller=p;j.inArea=s};t.mouseout=function(u){t.event=u;clearTimeout(j.timer);p.onMouseOutArea(r,q,i,t);j.timer=setTimeout(function(){j.timer=false;p.onMouseExitArea(r,q,i,t);j.chartEnv=false;j.inArea=-1},r.opt.features.mousearea.areaMoveDelay)};c(t.area.node).mouseover(t.mouseover);c(t.area.node).mouseout(t.mouseout)})(m,m.mouseAreas[k],k,this,n)}},onMouseOverArea:function(g,f,e,d){a.onMouseOver(g,d.piece?d.piece.serie:false,d.index,d)},onMouseOutArea:function(g,f,e,d){a.onMouseOut(g,d.piece?d.piece.serie:false,d.index,d)},onMouseEnterArea:function(g,f,e,d){a.onMouseEnter(g,d.piece?d.piece.serie:false,d.index,d)},onMouseChangedArea:function(g,f,e,d){a.onMouseChanged(g,d.piece?d.piece.serie:false,d.index,d)},onMouseExitArea:function(g,f,e,d){a.onMouseExit(g,d.piece?d.piece.serie:false,d.index,d)}};c.elycharts.featuresmanager.register(c.elycharts.mousemanager,0)})(jQuery);(function(c){var a=c.elycharts.featuresmanager;var b=c.elycharts.common;c.elycharts.shadowmanager={beforeShow:function(g,k){if(!g.opt.features.shadows||!g.opt.features.shadows.active){return}var d=g.opt.features.shadows.offset;var h=[];for(var f=0;f<k.length;f++){var l=[];for(var e=0;e<k[f].path.length;e++){var m=k[f].path[e];switch(m[0]){case"M":case"L":l.push([m[0],m[1]+d[0],m[2]+d[1]]);break;case"A":case"C":l.push([m[0],m[1],m[2],m[3],m[4],m[5],m[6]+d[0],m[7]+d[1]]);break;case"z":case"Z":l.push([m[0]]);break}}h.push({path:l,attr:g.opt.features.shadows.props})}for(var f=h.length-1;f>=0;f--){k.unshift(h[f])}}};c.elycharts.featuresmanager.register(c.elycharts.shadowmanager,5)})(jQuery);(function(b){var a=b.elycharts.common;b.elycharts.tooltipmanager={afterShow:function(c,d){if(c.tooltipContainer){c.tooltipFrame.remove();c.tooltipFrame=null;c.tooltipFrameElement=null;c.tooltipContent.remove();c.tooltipContent=null;c.tooltipContainer.remove();c.tooltipContainer=null}if(!b.elycharts.tooltipid){b.elycharts.tooltipid=0}b.elycharts.tooltipid++;c.tooltipContainer=b('<div id="elycharts_tooltip_'+b.elycharts.tooltipid+'" style="position: absolute; top: 100; left: 100; z-index: 10; overflow: hidden; white-space: nowrap; display: none"><div id="elycharts_tooltip_'+b.elycharts.tooltipid+'_frame" style="position: absolute; top: 0; left: 0; z-index: -1"></div><div id="elycharts_tooltip_'+b.elycharts.tooltipid+'_content" style="cursor: default"></div></div>').appendTo(document.body);c.tooltipFrame=a._RaphaelInstance("elycharts_tooltip_"+b.elycharts.tooltipid+"_frame",500,500);c.tooltipContent=b("#elycharts_tooltip_"+b.elycharts.tooltipid+"_content")},_prepareShow:function(e,d,c,f){if(e.tooltipFrameElement){e.tooltipFrameElement.attr(d.frameProps)}if(d.padding){e.tooltipContent.css({padding:d.padding[0]+"px "+d.padding[1]+"px"})}e.tooltipContent.css(d.contentStyle);e.tooltipContent.html(f);var g=b(e.container).offset();if(e.opt.features.tooltip.fixedPos){g.top+=e.opt.features.tooltip.fixedPos[1];g.left+=e.opt.features.tooltip.fixedPos[0]}else{var h=this.getXY(e,d,c);if(!h[2]){g.left+=h[0];while(g.top+h[1]<0){h[1]+=20}g.top+=h[1]}else{g.left=h[0];g.top=h[1]}}return{top:g.top,left:g.left}},getXY:function(e,i,c){var l=0,k=0;if(c.path[0][0]=="RECT"){l=a.getX(c.path[0]);k=a.getY(c.path[0])-i.height-20}else{if(c.path[0][0]=="CIRCLE"){l=a.getX(c.path[0]);k=a.getY(c.path[0])-i.height-20}else{if(c.path[0][0]=="SLICE"){var o=c.path[0];var m=i.width&&i.width!="auto"?i.width:100;var d=i.height&&i.height!="auto"?i.height:100;var f=Math.sqrt(Math.pow(m,2)+Math.pow(d,2))/2;if(f>e.opt.r){f=e.opt.r}var n=o[5]+(o[6]-o[5])/2+180;var g=Math.PI/180;l=o[1]+f*Math.cos(-n*g)-m/2;k=o[2]+f*Math.sin(-n*g)-d/2}else{if(c.piece&&c.piece.paths&&c.index>=0&&c.piece.paths[c.index]&&c.piece.paths[c.index].rect){var j=c.piece.paths[c.index].rect;l=j[0];k=j[1]-i.height-20}}}}if(e.opt.features.tooltip.positionHandler){return e.opt.features.tooltip.positionHandler(e,i,c,l,k)}else{return[l,k]}},onMouseEnter:function(f,g,d,c){var e=c.props.tooltip;if(!e||!e.active){return}if(!f.opt.tooltips||(g&&(!f.opt.tooltips[g]||!f.opt.tooltips[g][d]))||(!g&&!f.opt.tooltips[d])){return this.onMouseExit(f,g,d,c)}var h=g?f.opt.tooltips[g][d]:f.opt.tooltips[d];if(e.width&&e.width!="auto"&&e.height&&e.height!="auto"){var i=e.frameProps&&e.frameProps["stroke-width"]?e.frameProps["stroke-width"]:0;f.tooltipContainer.width(e.width+i+1).height(e.height+i+1);if(!f.tooltipFrameElement&&e.frameProps){f.tooltipFrameElement=f.tooltipFrame.rect(i/2,i/2,e.width,e.height,e.roundedCorners)}}f.tooltipContainer.css(this._prepareShow(f,e,c,h)).fadeIn(f.opt.features.tooltip.fadeDelay)},onMouseChanged:function(f,g,d,c){var e=c.props.tooltip;if(!e||!e.active){return}if(!f.opt.tooltips||(g&&(!f.opt.tooltips[g]||!f.opt.tooltips[g][d]))||(!g&&!f.opt.tooltips[d])){return this.onMouseExit(f,g,d,c)}var h=g?f.opt.tooltips[g][d]:f.opt.tooltips[d];f.tooltipContainer.clearQueue();f.tooltipContainer.animate(this._prepareShow(f,e,c,h),f.opt.features.tooltip.moveDelay,"linear")},onMouseExit:function(f,g,d,c){var e=c.props.tooltip;if(!e||!e.active){return}f.tooltipContainer.fadeOut(f.opt.features.tooltip.fadeDelay)}};b.elycharts.featuresmanager.register(b.elycharts.tooltipmanager,20)})(jQuery);(function(c){var a=c.elycharts.featuresmanager;var b=c.elycharts.common;c.elycharts.barline={init:function(d){},draw:function(i){var f=i.paper;var e=i.opt;i.xmin=e.margins[3];i.xmax=e.width-e.margins[1];i.ymin=e.margins[0];i.ymax=e.height-e.margins[2];var l=0;for(var h in e.values){var n=e.values[h];var m=n[0];var j={props:b.areaProps(i,"Series",h)};i.plots[h]=j;if(!j.props.stacked||!i.plots[j.props.stacked]){j.from=0}else{j.from=i.plots[j.props.stacked].to}j.to=j.from+m;if(j.to>l){l=j.to}}if(typeof e.max!="undefined"){l=e.max}if(!l){l=1}var g=[];for(h in e.values){j=i.plots[h];var k=(i.xmax-i.xmin)/l;if(e.direction!="rtl"){g.push({paths:[{path:[["RECT",i.xmin+k*j.from,i.ymin,i.xmin+k*j.to,i.ymax]],attr:j.props.plotProps}],section:"Series",serie:h,subSection:"Plot",mousearea:"paths"})}else{g.push({paths:[{path:[["RECT",i.xmax-k*j.from,i.ymin,i.xmax-k*j.to,i.ymax]],attr:j.props.plotProps}],section:"Series",serie:h,subSection:"Plot",mousearea:"paths"})}}a.beforeShow(i,g);b.show(i,g);a.afterShow(i,g);return g}}})(jQuery);(function(c){var a=c.elycharts.featuresmanager;var b=c.elycharts.common;c.elycharts.funnel={init:function(d){},draw:function(f){var j=f.paper;var e=f.opt;f.xmin=e.margins[3];f.xmax=e.width-e.margins[1];f.ymin=e.margins[0]+Math.abs(e.rh);for(var h in e.values){var d=e.values[h];var i=e.method=="width"?d[d.length-1]/(d[0]?d[0]:1):Math.sqrt(d[d.length-1]/(d[0]?d[0]:1)*Math.pow(1/2,2))*2;f.ymax=e.height-e.margins[2]-i*Math.abs(e.rh);var g=this.pieces(f,h,0,1,1,d)}a.beforeShow(f,g);b.show(f,g);a.afterShow(f,g);return g},pieces:function(o,n,d,g,f,t){var x,j=[],e=o.opt;var s=t[0]?t[0]:1;var m=d;var k=(g-d-e.topSector-e.bottomSector)/(t.length>1?t.length-1:1);var q=f;if((x=this.edge(o,m,q,true))){j.push({path:x,section:"Edge",attr:o.opt.edgeProps})}if(e.topSector>0&&(x=this.section(o,m,m=m+e.topSector,q,q))){j.push({path:x.path,center:x.center,rect:x.rect,section:"Sector",serie:"top",attr:o.opt.topSectorProps})}var u=[];for(var l=1;l<t.length;l++){var r=t[0]?t[l]:1;if((x=this.section(o,m,m=m+k,q,e.method=="width"?q=r/s*f:q=Math.sqrt(r/s*Math.pow(f/2,2))*2))){var p=b.areaProps(o,"Series",n,l-1)}u.push({path:x.path,center:x.center,rect:x.rect,attr:p.plotProps})}j.push({section:"Series",serie:n,paths:u,subSection:"Plot",mousearea:"paths"});if(e.bottomSector>0&&(x=this.section(o,m,m=m+e.bottomSector,q,q))){j.push({path:x.path,center:x.center,rect:x.rect,section:"Sector",serie:"bottom",attr:o.opt.bottomSectorProps})}if((x=this.edge(o,m,q,false))){j.push({path:x,section:"Edge",attr:o.opt.edgeProps})}return j},section:function(k,m,i,j,l){x1a=k.xmin+(k.xmax-k.xmin)*(j/-2+1/2);x2a=k.xmin+(k.xmax-k.xmin)*(j/2+1/2);x1b=k.xmin+(k.xmax-k.xmin)*(l/-2+1/2);x2b=k.xmin+(k.xmax-k.xmin)*(l/2+1/2);y1=k.ymin+(k.ymax-k.ymin)*m;y2=k.ymin+(k.ymax-k.ymin)*i;var f=(x2a-x1a)/2;var h=f/(k.xmax-k.xmin)*2*Math.abs(k.opt.rh);var e=(x2b-x1b)/2;var g=e/(k.xmax-k.xmin)*2*Math.abs(k.opt.rh);var d=[];d.push(["M",x1a,y1]);if(k.opt.rh!=0){d.push(["A",f,h,0,0,k.opt.rh>0?1:0,x2a,y1])}else{d.push(["L",x2a,y1])}d.push(["L",x2b,y2]);if(k.opt.rh!=0){d.push(["A",e,g,0,0,k.opt.rh>0?0:1,x1b,y2])}else{d.push(["L",x1b,y2])}d.push(["z"]);return{path:d,center:[(x2a+x1a)/2,(y2+y1)/2+(k.opt.rh>0?-1:+1)*(h+g)/2],rect:[x1a,y1,x2a,y2]}},edge:function(j,i,d,g){if((g&&j.opt.rh>=0)||(!g&&j.opt.rh<=0)){return false}x1=j.xmin+(j.xmax-j.xmin)*(d/-2+1/2);x2=j.xmin+(j.xmax-j.xmin)*(d/2+1/2);y=j.ymin+(j.ymax-j.ymin)*i;var k=(x2-x1)/2;var f=k/(j.xmax-j.xmin)*2*Math.abs(j.opt.rh);var e=[];e.push(["M",x1,y]);e.push(["A",k,f,0,0,j.opt.rh<0?1:0,x2,y]);e.push(["A",k,f,0,0,j.opt.rh<0?1:0,x1,y]);e.push(["z"]);return e}}})(jQuery);(function(c){var a=c.elycharts.featuresmanager;var b=c.elycharts.common;c.elycharts.line={init:function(d){},draw:function(k){if(b.executeIfChanged(k,["values","series"])){k.plots={};k.axis={x:{}};k.barno=0;k.indexCenter="line"}var t=k.opt;var H=k.plots;var u=k.axis;var g=k.paper;var Q=k.opt.values;var n=k.opt.labels;var K,l,B,w,f;if(b.executeIfChanged(k,["values","series"])){var O=0;var I=false;for(w in Q){f={index:O,type:false,visible:false};H[w]=f;if(Q[w]){B=b.areaProps(k,"Series",w);f.type=B.type;if(B.type=="bar"){k.indexCenter="bar"}if(B.visible){f.visible=true;if(B.stacked&&!(typeof B.stacked=="string")){B.stacked=I}if(typeof B.stacked=="undefined"||B.stacked==w||B.stacked<0||!H[B.stacked]||!H[B.stacked].visible||H[B.stacked].type!=f.type){f.ref=w;if(B.type=="bar"){f.barno=k.barno++}f.from=[];if(!B.cumulative){f.to=Q[w]}else{f.to=[];l=0;for(K=0;K<Q[w].length;K++){f.to.push(l+=Q[w][K])}}for(K=0;K<Q[w].length;K++){f.from.push(0)}}else{f.ref=B.stacked;if(B.type=="bar"){f.barno=H[B.stacked].barno}f.from=H[B.stacked].stack;f.to=[];l=0;if(!B.cumulative){for(K=0;K<Q[w].length;K++){f.to.push(f.from[K]+Q[w][K])}}else{for(K=0;K<Q[w].length;K++){f.to.push(f.from[K]+(l+=Q[w][K]))}}H[B.stacked].stack=f.to}f.stack=f.to;f.max=Math.max.apply(Math,f.from.concat(f.to));f.min=Math.min.apply(Math,f.from.concat(f.to));if(B.axis){if(!u[B.axis]){u[B.axis]={plots:[]}}u[B.axis].plots.push(w);if(typeof u[B.axis].max=="undefined"){u[B.axis].max=f.max}else{u[B.axis].max=Math.max(u[B.axis].max,f.max)}if(typeof u[B.axis].min=="undefined"){u[B.axis].min=f.min}else{u[B.axis].min=Math.min(u[B.axis].min,f.min)}}I=w}}}}if(b.executeIfChanged(k,["values","series","axis"])){for(var p in u){B=b.areaProps(k,"Axis",p);u[p].props=B;if(typeof B.max!="undefined"){u[p].max=B.max}if(typeof B.min!="undefined"){u[p].min=B.min}if(u[p].min==u[p].max){u[p].max=u[p].min+1}if(B.normalize&&B.normalize>0){var G=Math.abs(u[p].max);if(u[p].min&&Math.abs(u[p].min)>G){G=Math.abs(u[p].min)}if(G){var z=Math.floor(Math.log(G)/Math.LN10)-(B.normalize-1);z=z>=0?Math.pow(10,z):1/Math.pow(10,-z);G=Math.ceil(G/z/(t.features.grid.ny?t.features.grid.ny:1))*z*(t.features.grid.ny?t.features.grid.ny:1);G=Math.round(G/z)*z;u[p].normalizationBase=z;if(u[p].max){u[p].max=Math.ceil(u[p].max/G)*G}if(u[p].min){u[p].min=Math.floor(u[p].min/G)*G}}}if(u[p].plots){for(var D in u[p].plots){H[u[p].plots[D]].max=u[p].max;H[u[p].plots[D]].min=u[p].min}}}}var L=[];this.grid(k,L);var q=(t.width-t.margins[3]-t.margins[1])/(n.length>1?n.length-1:1);var J=(t.width-t.margins[3]-t.margins[1])/(n.length>0?n.length:1);for(w in Q){var M=Q[w];B=b.areaProps(k,"Series",w);f=H[w];if(B.lineCenter&&B.lineCenter=="auto"){B.lineCenter=(k.indexCenter=="bar")}else{if(B.lineCenter&&k.indexCenter=="line"){k.indexCenter="bar"}}if(Q[w]&&B.visible){var o=(t.height-t.margins[2]-t.margins[0])/(f.max-f.min);if(B.type=="line"){var A=["LINE",[],B.rounded];var h=["LINEAREA",[],[],B.rounded];var P=[];for(K=0,D=n.length;K<D;K++){var R=b.areaProps(k,"Series",w,K);var N=f.to[K]>f.max?f.max:(f.to[K]<f.min?f.min:f.to[K]);var F=Math.round((B.lineCenter?J/2:0)+t.margins[3]+K*(B.lineCenter?J:q));var E=Math.round(t.height-t.margins[2]-o*(N-f.min));var r=f.from[K]>f.max?f.max:(f.from[K]<f.min?f.min:f.from[K]);var m=Math.round(t.height-t.margins[2]-o*(r-f.min))+(c.browser.msie?1:0);A[1].push([F,E]);if(B.fill){h[1].push([F,E]);h[2].push([F,m])}if(R.dot){P.push({path:[["CIRCLE",F,E,R.dotProps.size]],attr:R.dotProps})}}if(B.fill){L.push({section:"Series",serie:w,subSection:"Fill",path:[h],attr:B.fillProps})}else{L.push({section:"Series",serie:w,subSection:"Fill",path:false,attr:false})}L.push({section:"Series",serie:w,subSection:"Plot",path:[A],attr:B.plotProps,mousearea:"pathsteps"});if(P.length){L.push({section:"Series",serie:w,subSection:"Dot",paths:P})}else{L.push({section:"Series",serie:w,subSection:"Dot",path:false,attr:false})}}else{pieceBar=[];for(K=0,D=n.length;K<D;K++){if(f.from[K]!=f.to[K]){var j=Math.floor((J-t.barMargins)/k.barno);var C=j*(100-B.barWidthPerc)/200;var e=t.barMargins/2+f.barno*j;var s=Math.floor(t.margins[3]+K*J+e+C);var T=Math.round(t.height-t.margins[2]-o*(f.to[K]-f.min));var S=Math.round(t.height-t.margins[2]-o*(f.from[K]-f.min));pieceBar.push({path:[["RECT",s,T,s+j-C*2,S]],attr:B.plotProps})}else{pieceBar.push({path:false,attr:false})}}if(pieceBar.length){L.push({section:"Series",serie:w,subSection:"Plot",paths:pieceBar,mousearea:"paths"})}else{L.push({section:"Series",serie:w,subSection:"Plot",path:false,attr:false,mousearea:"paths"})}}}else{if(B.type=="line"){L.push({section:"Series",serie:w,subSection:"Fill",path:false,attr:false})}L.push({section:"Series",serie:w,subSection:"Plot",path:false,attr:false,mousearea:"paths"});if(B.type=="line"){L.push({section:"Series",serie:w,subSection:"Dot",path:false,attr:false})}}}a.beforeShow(k,L);b.show(k,L);a.afterShow(k,L);return L},grid:function(h,S){if(b.executeIfChanged(h,["values","series","axis","labels","margins","width","height","features.grid"])){var v=h.opt;var B=h.opt.features.grid;var d=h.paper;var w=h.axis;var n=h.opt.labels;var q=(v.width-v.margins[3]-v.margins[1])/(n.length>1?n.length-1:1);var O=(v.width-v.margins[3]-v.margins[1])/(n.length>0?n.length:1);var R,Q,I,H,A,P,N,f,C,l;var D=[];var k=B.labelsCenter;if(k=="auto"){k=(h.indexCenter=="bar")}if(w.x&&w.x.props.labels){for(R=0;R<n.length;R++){if(w.x.props.labelsSkip&&R<w.x.props.labelsSkip){n[R]=false}else{if(typeof n[R]!="boolean"||n[R]){C=n[R];if(w.x.props.labelsFormatHandler){C=w.x.props.labelsFormatHandler(C)}l=(w.x.props.prefix?w.x.props.prefix:"")+n[R]+(w.x.props.suffix?w.x.props.suffix:"");P=(k&&w.x.props.labelsAnchor!="start"?Math.round(O/2):0)+v.margins[3]+R*(k?O:q)+(w.x.props.labelsMargin?w.x.props.labelsMargin:0);N=v.height-v.margins[2]+w.x.props.labelsDistance;f=d.text(P,N,l).attr(w.x.props.labelsProps).toBack();if(w.x.props.labelsRotate){f.attr({"text-anchor":w.x.props.labelsRotate>0?"start":"end"}).rotate(w.x.props.labelsRotate,P,N).toBack()}else{if(B.nx=="auto"&&P+f.getBBox().width/(w.x.props.labelsAnchor&&w.x.props.labelsAnchor=="start"?1:2)>v.width-v.margins[1]){f.hide();n[R]=false}else{if(B.nx=="auto"&&(!w.x.props.labelsAnchor||w.x.props.labelsAnchor!="start")&&P-f.getBBox().width/2<0){f.hide();n[R]=false}else{if(w.x.props.labelsAnchor&&w.x.props.labelsAnchor=="start"){f.attr({"text-anchor":"start"});A=f.getBBox().width+(w.x.props.labelsMargin?w.x.props.labelsMargin:0)+(w.x.props.labelsMarginRight?w.x.props.labelsMarginRight:0)-(k?O:q);if(w.x.props.labelsHideCovered&&A>0){Q=R+Math.ceil(A/(k?O:q));for(;R<Q&&R+1<n.length;R++){n[R+1]=false}}}else{if(w.x.props.labelsHideCovered){A=(f.getBBox().width+(w.x.props.labelsMargin?w.x.props.labelsMargin:0)+(w.x.props.labelsMarginRight?w.x.props.labelsMarginRight:0))/1-(k?O:q);if(A>0){Q=R+Math.ceil(A/(k?O:q));for(;R<Q&&R+1<n.length;R++){n[R+1]=false}}}}}}}D.push({path:[["RELEMENT",f]],attr:false})}}}}S.push({section:"Axis",serie:"x",subSection:"Label",paths:D});if(w.x&&w.x.props.title){I=v.margins[3]+Math.floor((v.width-v.margins[1]-v.margins[3])/2);H=v.height-v.margins[2]+w.x.props.titleDistance*(c.browser.msie?w.x.props.titleDistanceIE:1);S.push({section:"Axis",serie:"x",subSection:"Title",path:[["TEXT",w.x.props.title,I,H]],attr:w.x.props.titleProps})}else{S.push({section:"Axis",serie:"x",subSection:"Title",path:false,attr:false})}for(var r in ["l","r"]){Q=["l","r"][r];if(w[Q]&&w[Q].props.labels){D=[];for(R=w[Q].props.labelsSkip?w[Q].props.labelsSkip:0;R<=B.ny;R++){var o=(v.height-v.margins[2]-v.margins[0])/B.ny;if(Q=="r"){P=v.width-v.margins[1]+w[Q].props.labelsDistance;if(!w[Q].props.labelsProps["text-anchor"]){w[Q].props.labelsProps["text-anchor"]="start"}}else{P=v.margins[3]-w[Q].props.labelsDistance;if(!w[Q].props.labelsProps["text-anchor"]){w[Q].props.labelsProps["text-anchor"]="end"}}if(w[Q].props.labelsAnchor){w[Q].props.labelsProps["text-anchor"]=w[Q].props.labelsAnchor}C=(w[Q].min+(R*((w[Q].max-w[Q].min)/B.ny)));if(w[Q].normalizationBase){C=Math.round(C/w[Q].normalizationBase)/(1/w[Q].normalizationBase)}if(w[Q].props.labelsFormatHandler){C=w[Q].props.labelsFormatHandler(C)}if(w[Q].props.labelsCompactUnits){C=b.compactUnits(C,w[Q].props.labelsCompactUnits)}l=(w[Q].props.prefix?w[Q].props.prefix:"")+C+(w[Q].props.suffix?w[Q].props.suffix:"");N=v.height-v.margins[2]-R*o;D.push({path:[["TEXT",l,P,N+(w[Q].props.labelsMargin?w[Q].props.labelsMargin:0)]],attr:w[Q].props.labelsProps})}S.push({section:"Axis",serie:Q,subSection:"Label",paths:D})}else{S.push({section:"Axis",serie:Q,subSection:"Label",paths:[]})}if(w[Q]&&w[Q].props.title){if(Q=="r"){I=v.width-v.margins[1]+w[Q].props.titleDistance*(c.browser.msie?w[Q].props.titleDistanceIE:1)}else{I=v.margins[3]-w[Q].props.titleDistance*(c.browser.msie?w[Q].props.titleDistanceIE:1)}var u=b._clone(w[Q].props.titleProps);u.rotation=Q=="l"?270:90;S.push({section:"Axis",serie:Q,subSection:"Title",path:[["TEXT",w[Q].props.title,I,v.margins[0]+Math.floor((v.height-v.margins[0]-v.margins[2])/2)]],attr:u})}else{S.push({section:"Axis",serie:Q,subSection:"Title",path:false,attr:false})}}if(B.nx||B.ny){var K=[],J,M=B.nx=="auto"?(k?n.length:n.length-1):B.nx,L=B.ny,g=(v.height-v.margins[2]-v.margins[0])/L,m=(v.width-v.margins[1]-v.margins[3])/M,G=typeof B.forceBorder=="object"?B.forceBorder[3]:B.forceBorder,F=typeof B.forceBorder=="object"?B.forceBorder[1]:B.forceBorder,s=typeof B.forceBorder=="object"?B.forceBorder[0]:B.forceBorder,p=typeof B.forceBorder=="object"?B.forceBorder[2]:B.forceBorder,E=typeof B.draw=="object"?B.draw[0]:B.draw,z=typeof B.draw=="object"?B.draw[1]:B.draw;if(L>0){for(R=0;R<L+1;R++){if(R==0&&s||R==L&&p||R>0&&R<L&&E){K.push(["M",v.margins[3]-B.extra[3],v.margins[0]+Math.round(R*g)]);K.push(["L",v.width-v.margins[1]+B.extra[1],v.margins[0]+Math.round(R*g)])}}}for(R=0;R<M+1;R++){if((J=z&&(B.nx!="auto"||typeof n[R]!="boolean"||n[R]))||(G&&R==0)||(F&&R==M)){K.push(["M",v.margins[3]+Math.round(R*m),v.margins[0]-B.extra[0]]);K.push(["L",v.margins[3]+Math.round(R*m),v.height-v.margins[2]+B.extra[2]])}}S.push({section:"Grid",path:K.length?K:false,attr:K.length?B.props:false});var e=[];if(B.ticks.active&&(typeof B.ticks.active!="object"||B.ticks.active[0])){for(R=0;R<M+1;R++){if(B.nx!="auto"||typeof n[R]!="boolean"||n[R]){e.push(["M",v.margins[3]+Math.round(R*m),v.height-v.margins[2]-B.ticks.size[1]]);e.push(["L",v.margins[3]+Math.round(R*m),v.height-v.margins[2]+B.ticks.size[0]])}}}if(B.ticks.active&&(typeof B.ticks.active!="object"||B.ticks.active[1])){for(R=0;R<L+1;R++){e.push(["M",v.margins[3]-B.ticks.size[0],v.margins[0]+Math.round(R*g)]);e.push(["L",v.margins[3]+B.ticks.size[1],v.margins[0]+Math.round(R*g)])}}if(B.ticks.active&&(typeof B.ticks.active!="object"||B.ticks.active[2])){for(R=0;R<L+1;R++){e.push(["M",v.width-v.margins[1]-B.ticks.size[1],v.margins[0]+Math.round(R*g)]);e.push(["L",v.width-v.margins[1]+B.ticks.size[0],v.margins[0]+Math.round(R*g)])}}S.push({section:"Ticks",path:e.length?e:false,attr:e.length?B.ticks.props:false})}}}}})(jQuery);(function(c){var a=c.elycharts.featuresmanager;var b=c.elycharts.common;c.elycharts.pie={init:function(d){},draw:function(D){var e=D.opt;var o=D.opt.width;var B=D.opt.height;var q=D.opt.r?D.opt.r:Math.floor((o<B?o:B)/2.5);var g=D.opt.cx?D.opt.cx:Math.floor(o/2);var f=D.opt.cy?D.opt.cx:Math.floor(B/2);var z=0,A,p,t,x,j;for(t in e.values){x={visible:false,total:0,values:[]};D.plots[t]=x;var d=b.areaProps(D,"Series",t);if(d.visible){x.visible=true;z++;x.values=e.values[t];for(A=0,p=x.values.length;A<p;A++){if(x.values[A]>0){j=b.areaProps(D,"Series",t,A);if(typeof j.inside=="undefined"||j.inside<0){x.total+=x.values[A]}}}for(A=0;A<p;A++){if(x.values[A]<x.total*e.valueThresold){x.total=x.total-x.values[A];x.values[A]=0}}}}var s=q/z;var m=-s,k=0;var n=[];for(t in e.values){x=D.plots[t];var v=[];if(x.visible){m+=s;k+=s;var E=D.opt.startAngle,C=0,l=0;if(x.total==0){j=b.areaProps(D,"Series","empty");v.push({path:[["CIRCLE",g,f,q]],attr:j.plotProps})}else{for(A=0,p=x.values.length;A<p;A++){var u=x.values[A];if(u>0){j=b.areaProps(D,"Series",t,A);if(typeof j.inside=="undefined"||j.inside<0){E+=l;C=360*u/x.total;l=C}else{C=360*values[j.inside]/x.total*u/values[j.inside]}if(j.r){if(j.r>0){if(j.r<=1){k=m+s*j.r}else{k=m+j.r}}else{if(j.r>=-1){m=m+s*(-j.r)}else{m=m-j.r}}}if(!D.opt.clockwise){v.push({path:[["SLICE",g,f,k,m,E,E+C]],attr:j.plotProps})}else{v.push({path:[["SLICE",g,f,k,m,-E-C,-E]],attr:j.plotProps})}}else{v.push({path:false,attr:false})}}}}else{if(e.values[t]&&e.values[t].length){for(A=0,p=e.values[t].length;A<p;A++){v.push({path:false,attr:false})}}}n.push({section:"Series",serie:t,subSection:"Plot",paths:v,mousearea:"paths"})}a.beforeShow(D,n);b.show(D,n);a.afterShow(D,n);return n}}})(jQuery);